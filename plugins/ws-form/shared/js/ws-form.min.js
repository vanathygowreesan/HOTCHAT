!function($){"use strict";$.WS_Form=function(e){$.WS_Form.this=this,this.is_admin=this.set_is_admin(),this.user_roles=ws_form_settings.user_roles,this.form_interface=!1,this.group_data_cache=[],this.section_data_cache=[],this.field_data_cache=[],this.action_data_cache=[],this.validation_message_cache=[],this.invalid_feedback_cache=[],this.object_cache=[],this.object_cache.condition=[],this.object_cache.then=[],this.object_cache.else=[],this.action=!1,this.object_data_scratch=!1,this.form_history=[],this.history_index=0,this.framework_id=!1,this.framework=!1,this.framework_fields=!1,this.column_resize_obj=!1,this.column_size_value=0,this.column_size_value_old=0,this.offset_value=0,this.offset_value_old=0,this.dragged_field=null,this.dragged_field_in_section=null,this.dragged_section=null,this.dragged_section_in_group=null,this.dragging=!1,this.next_sibling_id_old=null,this.section_id_old=null,this.group_id_old=null,this.section_repeatable_dragged=!1,this.section_repeatable_indexes={},this.checksum=!1,this.checksum_setTimeout=!1,this.published_checksum="",this.recaptchas=[],this.recaptchas_v2_default=[],this.recaptchas_v2_invisible=[],this.recaptchas_v3_default=[],this.recaptchas_conditions=[],this.timeout_recaptcha=3e4,this.hcaptchas=[],this.hcaptchas_default=[],this.hcaptchas_invisible=[],this.hcaptchas_conditions=[],this.timeout_hcaptcha=3e4,this.keydown=[],this.timeout_interval=100,this.api_call_queue=[],this.api_call_queue_running=!1,this.number_to_word=["nought","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty"],this.label_old="",this.submit=!1,this.action_js=[],this.form_draft=!1,this.submit_auto_populate=!1,this.form_id_prefix="wsf-",this.field_name_prefix=ws_form_settings.field_prefix,this.meta_key_options_cache=[],this.options_action_objects=[],this.options_action_cache=[],this.sidebar_conditions=[],this.sidebar_expanded_obj=!1,this.touch_device="ontouchend"in document,this.hash="",this.token="",this.token_validated=!1,this.form_post_locked=!1,this.field_required_bypass=[],this.form_valid=!1,this.form_valid_old=null,this.form_validation_real_time_hooks=[],this.form_action_custom=!1,this.form_ajax=!0,this.object_focus=!1,this.field_type_click_drag_check=!1,this.section_id_click_drag_check=!1,this.password_strength_status=0,this.cascade_cache=[],this.select_ajax_cache=[],this.preview_window=void 0,this.file_frame=!1,this.file_frame_input_obj=!1,this.api_call_handle=[],this.visual_builder=!1,this.form_bypass_enabled=!1,this.action_js_process_validation_focus=!0,this.action_ga=!1},$.WS_Form.prototype.render=function(e){var t=this;void 0===e&&this.error("error_attributes"),void 0===e.obj&&this.error("error_attributes_obj"),void 0===e.form_id&&this.error("error_attributes_form_id"),this.form_canvas_obj=e.obj instanceof $?e.obj:$(e.obj),this.form_obj_id=this.form_canvas_obj.attr("id"),this.form_id=parseInt(e.form_id),0!==this.form_id&&(this.form_instance_id=parseInt(this.form_canvas_obj.attr("data-instance-id")),0!==this.form_instance_id&&(this.form_id_prefix=this.is_admin?"wsf-":"wsf-"+this.form_instance_id+"-",this.form_id_prefix_function=this.is_admin?"wsf_":"wsf_"+this.form_instance_id+"_",this.form_obj=this.form_canvas_obj.closest("form"),this.form_obj.length?this.form_obj.attr("novalidate",""):this.form_obj=this.form_canvas_obj,this.form_obj[0]!=this.form_canvas_obj[0]&&(this.form_obj.hasClass("wsf-form")||this.form_obj.addClass("wsf-form"),this.form_canvas_obj.hasClass("wsf-form")&&this.form_canvas_obj.removeClass("wsf-form")),this.get_configuration(function(){t.get_form(function(){t.init()})})))},$.WS_Form.configured=!1,$.WS_Form.css_rendered=!1,$.WS_Form.settings_plugin,$.WS_Form.settings_form=null,$.WS_Form.frameworks,$.WS_Form.parse_variables,$.WS_Form.parse_variable_help,$.WS_Form.parse_variable_repairable,$.WS_Form.actions,$.WS_Form.field_types,$.WS_Form.field_type_cache=[],$.WS_Form.file_types,$.WS_Form.meta_keys,$.WS_Form.meta_keys_required_setting=[],$.WS_Form.breakpoints,$.WS_Form.data_sources,$.WS_Form.templates_section,$.WS_Form.prototype.get_configuration=function(e,t,a){if(void 0===t&&(t=!1),void 0===a&&(a=!1),this.options_action_cache=[],a||this.loader_on(),!$.WS_Form.configured||t)if("undefined"==typeof wsf_form_json_config){var i=this;this.api_call("config","GET",!1,function(t){i.set_configuration(t.data),window.wsf_form_json_config=t.data,"function"==typeof e&&e()},!1,a)}else this.set_configuration(wsf_form_json_config),"function"==typeof e&&e();else"function"==typeof e&&e()},$.WS_Form.prototype.set_configuration=function(e){$.WS_Form.settings_plugin=e.settings_plugin,$.WS_Form.settings_form=e.settings_form,$.WS_Form.frameworks=e.frameworks,$.WS_Form.field_types=e.field_types,$.WS_Form.file_types=e.file_types,$.WS_Form.meta_keys=e.meta_keys,$.WS_Form.parse_variables=e.parse_variables,$.WS_Form.parse_variables_repairable=e.parse_variables_repairable,$.WS_Form.parse_variable_help=e.parse_variable_help,$.WS_Form.actions=e.actions,$.WS_Form.data_sources=e.data_sources,$.WS_Form.templates_section=e.templates_section,this.field_type_cache_build(),$.WS_Form.configured=!0},$.WS_Form.prototype.get_form=function(e){if(0==this.form_id)return this.error("error_form_id"),void this.loader_off();if($("#"+this.form_obj_id).attr("data-id",this.form_id),"undefined"==typeof wsf_form_json||void 0===wsf_form_json[this.form_id]){var t=this;this.api_call("form/"+this.form_id+"/full","GET",!1,function(a){t.form=a.form,void 0===window.wsf_form_json&&(window.wsf_form_json=[]),window.wsf_form_json[t.form_id]=a.form,t.data_cache_build(),"function"==typeof e&&e(),t.loader_off()})}else this.form=wsf_form_json[this.form_id],this.data_cache_build(),"function"==typeof e&&e(),this.loader_off()},$.WS_Form.prototype.form_build=function(){this.timer_start=new Date;var e=this.get_form_html(this.form);if(this.form_canvas_obj.html(e),!this.is_admin){var t=this.get_object_meta_value(this.form,"class_form_wrapper","");if(""!=t){var a=this.form_canvas_obj.attr("class");a+=" "+t.trim(),this.form_canvas_obj.attr("class",a)}}this.form_render(),this.timer_duration=new Date-this.timer_start},$.WS_Form.prototype.get_framework=function(){var e=this.is_admin?"ws-form":$.WS_Form.settings_plugin.framework;return $.WS_Form.frameworks.types[e]},$.WS_Form.prototype.get_form_html=function(e){if(void 0===e)return"";if(void 0===e.groups)return"";var t=this.get_framework().form[this.is_admin?"admin":"public"],a=this.html_encode(e.label);if(!this.is_admin&&"on"==this.get_object_meta_value(e,"label_render","on"))var i=this.is_admin?"":this.get_object_meta_value(this.form,"label_mask_form",""),r=""!=i?i:void 0!==t.mask_label?t.mask_label:"",s={label:a},o=this.mask_parse(r,s);else o="";var _=this.get_tabs_html(e);_+=this.get_groups_html(e.groups);r=t.mask_single,s={form:_,id:this.form_id_prefix+"tabs",label:o};return this.comment_html("Form: "+a)+this.mask_parse(r,s)+this.comment_html("Form: "+a,!0)},$.WS_Form.prototype.get_tabs_html=function(e){if(void 0===e.groups)return"";var t=e.groups,a=Object.keys(t).length;if(1==a&&!this.is_admin)return"";var i="",r=this.get_framework().tabs[this.is_admin?"admin":"public"],s=this.get_object_meta_value(this.form,"cookie_tab_index")?this.cookie_get("tab_index",0):0;if(a>1||this.is_admin){for(var o in t)if(t.hasOwnProperty(o)){var _=t[o];i+=this.get_tab_html(_,o,s==o)}var l="";if(!this.is_admin)this.get_object_meta_value(e,"tabs_hide",!1)&&(l+=' style="display:none"');var n=["wsf-group-tabs"];if(!this.is_admin){var c=this.get_object_meta_value(e,"class_tabs_wrapper",!1);""!=c&&n.push(c.trim())}var d=r.mask_wrapper,p={attributes:l,class:n.join(" "),tabs:i,id:this.form_id_prefix+"tabs"};return this.comment_html(this.language("comment_group_tabs"))+this.mask_parse(d,p)+this.comment_html(this.language("comment_group_tabs"),!0)}return""},$.WS_Form.prototype.get_tab_html=function(e,t,a){void 0===t&&(t=0),void 0===a&&(a=!1);var i=this.get_framework().tabs[this.is_admin?"admin":"public"],r=this.html_encode(e.label),s="";!this.is_admin&&"on"==this.get_object_meta_value(e,"hidden","")&&(s=' style="display:none" data-wsf-group-hidden');var o=i.mask_single,_={attributes:s,data_id:e.id,href:"#"+this.form_id_prefix+"group-"+e.id,label:r};return a&&void 0!==i.active?_.active=i.active:_.active="",this.mask_parse(o,_)},$.WS_Form.prototype.get_groups_html=function(e){if(void 0===e)return"";var t=Object.keys(e).length,a=this.get_framework().groups[this.is_admin?"admin":"public"],i=this.get_object_meta_value(this.form,"cookie_tab_index")?this.cookie_get("tab_index",0):0,r="",s=this.is_admin||t>1,o=0;for(var _ in e)if(e.hasOwnProperty(_)){var l=e[_];r+=this.get_group_html(l,_==i,s,o++)}var n=s?a.mask_wrapper:"#groups",c={class:["wsf-groups"].join(" "),column_count:$.WS_Form.settings_plugin.framework_column_count,groups:r,id:this.form_id_prefix+"tabs"};return(s?this.comment_html(this.language("comment_groups")):"")+this.mask_parse(n,c)+(s?this.comment_html(this.language("comment_groups"),!0):"")},$.WS_Form.prototype.get_group_html=function(e,t,a,i){void 0===t&&(t=!1),void 0===a&&(a=!0);var r=this.get_framework().groups[this.is_admin?"admin":"public"],s=this.html_encode(e.id),o=this.html_encode(e.label);if(!this.is_admin&&"on"==this.get_object_meta_value(e,"label_render","on"))var _=this.is_admin?"":this.get_object_meta_value(this.form,"label_mask_group",""),l=""!=_?_:void 0!==r.mask_label?r.mask_label:"",n={label:o},c=this.mask_parse(l,n);else c="";var d,p=this.get_sections_html(e),u=[];(void 0!==r.class&&u.push(r.class),this.is_admin)||(""!=(d=this.get_object_meta_value(this.form,"class_group_wrapper",""))&&u.push(d.trim()),""!=(d=this.get_object_meta_value(e,"class_group_wrapper",""))&&u.push(d.trim()));t&&void 0!==r.class_active&&u.push(r.class_active);var f=[];this.is_admin||!this.is_admin&&"on"==this.get_object_meta_value(e,"hidden","")&&f.push("data-wsf-group-hidden");l=a?r.mask_single:"#group",n={attributes:(f.length>0?" ":"")+f.join(" "),class:u.join(" "),column_count:$.WS_Form.settings_plugin.framework_column_count,data_id:e.id,data_group_index:i,group:p,id:this.form_id_prefix+"group-"+s,label:c};return(a?this.comment_html(this.language("comment_group")+": "+o):"")+this.mask_parse(l,n)+(a?this.comment_html(this.language("comment_group")+": "+o,!0):"")},$.WS_Form.prototype.get_sections_html=function(e){var t="",a=this.get_framework().sections[this.is_admin?"admin":"public"],i=(e.id,e.sections),r={};if("object"==typeof this.submit?void 0!==this.submit.section_repeatable&&(r=this.submit.section_repeatable):!1!==this.submit_auto_populate&&void 0!==this.submit_auto_populate.section_repeatable&&(r=this.submit_auto_populate.section_repeatable),void 0===i)return"";for(var s in i)if(i.hasOwnProperty(s)){var o=i[s],_="section_"+o.id,l=!1!==r&&void 0!==r[_]&&void 0!==r[_].index?r[_].index:[!1];for(var n in l)if(l.hasOwnProperty(n)){var c=l[n];t+=this.get_section_html(o,c)}}var d=a.mask_wrapper,p={class:"wsf-sections",column_count:$.WS_Form.settings_plugin.framework_column_count,data_id:e.id,sections:t,id:this.form_id_prefix+"sections-"+e.id};return this.comment_html(this.language("comment_sections"))+this.mask_parse(d,p)+this.comment_html(this.language("comment_sections"),!0)},$.WS_Form.prototype.get_section_html=function(e,t){void 0===t&&(t=!1);var a=!1;if(!this.is_admin&&((a="on"==this.get_object_meta_value(e,"section_repeatable",""))&&!1===t)){t=0;do{t++}while($("#"+this.form_id_prefix+"section-"+e.id+"-repeat-"+t).length)}var i=[],r=this.get_framework().sections[this.is_admin?"admin":"public"],s=this.column_class_array(e);if(a&&!this.is_admin&&(i.push("data-repeatable"),i.push('data-repeatable-index="'+t+'"')),void 0!==r.class_single&&(s=s.concat(r.class_single)),!this.is_admin){var o;""!=(o=this.get_object_meta_value(this.form,"class_section_wrapper",""))&&s.push(o.trim()),""!=(o=this.get_object_meta_value(e,"class_section_wrapper",""))&&s.push(o.trim());var _=this.get_object_meta_value(e,"class_single_vertical_align","");if(_){var l=this.get_field_value_fallback(!1,!1,"class_single_vertical_align");void 0!==l[_]&&s.push(l[_])}var n=this.get_object_meta_value(this.form,"conversational",!1),c=this.get_object_meta_value(e,"conversational_full_height_section",!1);n&&c&&s.push("wsf-form-conversational-section-full-height")}var d=this.html_encode(e.label);if(this.is_admin||"on"==this.get_object_meta_value(e,"label_render","on"))var p=this.is_admin?"":this.get_object_meta_value(this.form,"label_mask_section",""),u=""!=p?p:void 0!==r.mask_label?r.mask_label:"",f={label:d},h=this.mask_parse(u,f);else h="";this.is_admin||("on"==this.get_object_meta_value(e,"disabled_section","")&&i.push('disabled aria-disabled="true"'),"on"==this.get_object_meta_value(e,"hidden_section","")&&i.push('style="display:none;" aria-live="polite" aria-hidden="true"'));var m=this.get_fields_html(e,t);u=r.mask_single,f={attributes:(i.length>0?" ":"")+i.join(" "),class:s.join(" "),column_count:$.WS_Form.settings_plugin.framework_column_count,data_id:e.id,id:this.form_id_prefix+"section-"+e.id+(t?"-repeat-"+t:""),label:h,section:m,section_id:$.WS_Form.settings_plugin.helper_section_id?'<span class="wsf-section-id">'+this.language("id")+": "+e.id+"</span>":""};return this.comment_html(this.language("comment_section")+": "+d)+this.mask_parse(u,f)+this.comment_html(this.language("comment_section")+": "+d,!0)},$.WS_Form.prototype.get_fields_html=function(e,t){var a="on"==this.get_object_meta_value(e,"section_repeatable","");void 0===t&&(t=!!a&&0);var i="",r=this.get_framework().fields[this.is_admin?"admin":"public"],s=(e.id,e.fields),o=this.html_encode(e.label);if(!this.is_admin&&"on"==this.get_object_meta_value(e,"label_render","on"))var _=this.is_admin?"":this.get_object_meta_value(this.form,"label_mask_section",""),l=""!=_?_:void 0!==r.mask_wrapper_label?r.mask_wrapper_label:"",n={label:o},c=this.mask_parse(l,n);else c="";if(void 0===s)return"";for(var d in s)if(s.hasOwnProperty(d)){var p=s[d];i+=this.get_field_html(p,t)}l=r.mask_wrapper,n={column_count:$.WS_Form.settings_plugin.framework_column_count,data_id:e.id,fields:i,id:this.form_id_prefix+"fields-"+e.id,label:c};return this.comment_html(this.language("comment_fields"))+this.mask_parse(l,n)+this.comment_html(this.language("comment_fields"),!0)},$.WS_Form.prototype.value_populate_process=function(e,t){if(null===e)return"";switch(t.type){case"datetime":return this.get_date_by_type(e,t);case"select":case"checkbox":case"radio":case"price_select":case"price_checkbox":case"price_radio":return"object"==typeof e?e.map(function(e){return e.toString()}):e;default:return this.html_encode(e)}},$.WS_Form.prototype.get_field_html=function(e,t){void 0===t&&(t=!1);var a=[];!1!==t&&a.push('data-repeatable-index="'+t+'"');var i=this.get_framework().fields[this.is_admin?"admin":"public"];this.is_admin||"on"==this.get_object_meta_value(e,"hidden","")&&a.push('style="display:none;" aria-live="polite" aria-hidden="true"');var r=this.column_class_array(e),s=this.get_object_meta_value(e,"sub_type",!1);""==s&&(s=!1);var o=this.get_field_value_fallback(e.type,!1,"class_single",!1,i,s);if(!1!==o&&(r=r.concat(o)),!this.is_admin){var _;""!=(_=this.get_object_meta_value(this.form,"class_field_wrapper",""))&&r.push(_.trim()),""!=(_=this.get_object_meta_value(e,"class_field_wrapper",""))&&r.push(_.trim());var l=this.get_object_meta_value(e,"class_single_vertical_align","");if(l){var n=this.get_field_value_fallback(e.type,!1,"class_single_vertical_align",!1,i,s);void 0!==n[l]&&r.push(n[l])}}var c=!1!==t?"_"+t:"",d=ws_form_settings.field_prefix+e.id+c;if("object"==typeof this.submit){if(void 0!==this.submit.meta&&void 0!==this.submit.meta[d]&&void 0!==this.submit.meta[d].value&&null!==this.submit.meta[d].value){var p=this.submit.meta[d].value;p=this.value_populate_process(p,e)}}else if(!1!==this.submit_auto_populate&&void 0!==this.submit_auto_populate.data&&void 0!==this.submit_auto_populate.data[d]&&null!==this.submit_auto_populate.data[d]){p=this.submit_auto_populate.data[d];p=this.value_populate_process(p,e)}var u=this.is_admin?"":this.get_field_html_single(e,p,!1,t),f=this.html_encode(e.label);if(void 0===$.WS_Form.field_type_cache[e.type])return"";var h=$.WS_Form.field_type_cache[e.type];if(void 0!==h.pro_required&&h.pro_required)return"";if(!this.is_admin&&(void 0!==h.mask_wrappers_drop&&h.mask_wrappers_drop))var m="#field";else m=this.get_field_value_fallback(e.type,!1,"mask_single",!1,i,s);switch(e.type){case"checkbox":case"price_checkbox":var v=this.get_object_meta_value(e,"checkbox_min",!1),b=this.get_object_meta_value(e,"checkbox_max",!1),g=this.get_object_meta_value(e,"select_all",!1);if(!1===v&&!1===b)break;!1!==v&&(v=parseInt(v,10))>0&&a.push('data-checkbox-min="'+v+'"'),!1===b||g||(b=parseInt(b,10))>=0&&a.push('data-checkbox-max="'+b+'"');break;case"select":case"price_select":var y=this.get_object_meta_value(e,"select_min",!1),k=this.get_object_meta_value(e,"select_max",!1);if(!1===y&&!1===k)break;!1!==y&&(y=parseInt(y,10))>0&&a.push('data-select-min="'+y+'"'),!1!==k&&(k=parseInt(k,10))>=0&&a.push('data-select-max="'+k+'"')}var w={attributes:(a.length>0?" ":"")+a.join(" "),class:r.join(" "),data_id:e.id,field:u,id:this.get_part_id(e.id,t,"field-wrapper"),type:e.type};return this.comment_html(this.language("comment_field")+": "+f)+this.mask_parse(m,w)+this.comment_html(this.language("comment_field")+": "+f,!0)},$.WS_Form.prototype.field_type_cache_build=function(){if(this.is_admin||($.WS_Form.field_type_cache=$.WS_Form.field_types),$.WS_Form.field_type_cache.length>0)return!0;for(var e in $.WS_Form.field_types){var t=$.WS_Form.field_types[e].types;for(var a in t)$.WS_Form.field_type_cache[a]=t[a]}},$.WS_Form.prototype.html_encode=function(e){switch(typeof e){case"string":e=this.html_encode_do(e);break;case"object":for(var t in e)e.hasOwnProperty(t)&&"string"==typeof e[t]&&(e[t]=this.html_encode_do(e[t]))}return e},$.WS_Form.prototype.html_encode_do=function(e){var t=this.replace_all(e,"&","&#38;");return t=this.replace_all(t,"<","&lt;"),t=this.replace_all(t,">","&gt;"),t=this.replace_all(t,'"',"&quot;")},$.WS_Form.prototype.html_strip=function(e){switch(typeof e){case"string":e=this.html_strip_do(e);break;case"object":for(var t in e)e.hasOwnProperty(t)&&"string"==typeof e[t]&&(e[t]=this.html_strip_do(e[t]))}return e},$.WS_Form.prototype.html_strip_do=function(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent},$.WS_Form.prototype.js_string_encode=function(e){return"string"!=typeof e?e:this.replace_all(e,"'","\\'")},$.WS_Form.prototype.loader_on=function(){$("#wsf-loader").addClass("wsf-loader-on")},$.WS_Form.prototype.loader_off=function(){$("#wsf-loader").removeClass("wsf-loader-on")},$.WS_Form.prototype.comment_html=function(e,t){return void 0===t&&(t=!1),$.WS_Form.settings_plugin.comments_html?"\x3c!-- "+(t?"/":"")+e+" --\x3e\n"+(t?"\n":""):""},$.WS_Form.prototype.comment_css=function(e){return $.WS_Form.settings_plugin.comments_css?"\t/* "+e+" */\n":""},$.WS_Form.prototype.get_object_value=function(e,t,a){return void 0===a&&(a=!1),void 0===e?a:void 0===e[t]?a:e[t]},$.WS_Form.prototype.get_field_value_fallback=function(e,t,a,i,r,s){if(void 0===i&&(i=!1),r||(r=this.framework_fields),void 0===s&&(s=!1),!1===s)return this.get_field_value_fallback_process(e,t,a,i,r);if((o=this.get_field_value_fallback_process(e,t,a+"_"+s,i,r))===i)var o=this.get_field_value_fallback_process(e,t,a,i,r);return o},$.WS_Form.prototype.get_field_value_fallback_process=function(e,t,a,i,r){var s=r,o=$.WS_Form.field_type_cache[e];if(!1!==t){if(!(void 0===s||void 0===s[t]||void 0===s[t].field_types||void 0===s[t].field_types[e]||void 0===s[t].field_types[e][a]))return s[t].field_types[e][a];if(!(void 0===s||void 0===s[t]||void 0===s[t][a]))return s[t][a]}return void 0===s||void 0===s.field_types||void 0===s.field_types[e]||void 0===s.field_types[e][a]?void 0===s||void 0===s[a]?void 0===o?i:void 0===o[a]?i:o[a]:s[a]:s.field_types[e][a]},$.WS_Form.prototype.get_object_data=function(e,t,a){switch(void 0===a&&(a=!1),e){case"form":return a?this.object_data_scratch:this.form;case"group":return a?this.object_data_scratch:this.group_data_cache[t];case"section":return a?this.object_data_scratch:this.section_data_cache[t];case"field":return a?this.object_data_scratch:this.field_data_cache[t];case"action":return this.action}return!1},$.WS_Form.prototype.get_object_meta=function(e,t){switch(e){case"form":var a=$.WS_Form.settings_form.sidebars.form.meta;break;case"group":a=$.WS_Form.settings_form.sidebars.group.meta;break;case"section":a=$.WS_Form.settings_form.sidebars.section.meta;break;case"field":var i=this.field_data_cache[t];a=$.WS_Form.field_type_cache[i.type]}return a},$.WS_Form.prototype.get_object_meta_value=function(e,t,a,i,r){if(void 0===a&&(a=!1),void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===e)return a;if(void 0===e.meta)return a;if(void 0===e.meta[t]){if(!i)return a;this.set_object_meta_value(e,t,a)}return r&&"string"==typeof e.meta[t]?this.parse_variables_process(e.meta[t]).output:e.meta[t]},$.WS_Form.prototype.has_object_meta_key=function(e,t){return void 0!==e&&void 0!==e.meta&&void 0!==e.meta[t]&&""!=e.meta[t]},$.WS_Form.prototype.parse_variables_process=function(e,t,a,i,r,s,o,_){if("string"!=typeof e)return this.parse_variables_process_error(e);if(-1==e.indexOf("#"))return this.parse_variables_process_error(e);void 0===t&&(t=!1),void 0===a&&(a=!1);var l="calc"===a;void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===s&&(s=!0),void 0===o&&(o=!1),void 0===_&&(_=1);var n={},c={},d=[];if(_>100)return this.error("error_parse_variable_syntax_error_depth","","parse_variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_depth"));for(var p in $.WS_Form.parse_variables)if($.WS_Form.parse_variables.hasOwnProperty(p)){var u=$.WS_Form.parse_variables[p];if((u.ignore_prefix,u.ignore_prefix)||-1!==e.indexOf("#"+p))for(var f in u.variables)if(u.variables.hasOwnProperty(f)&&-1!==e.indexOf("#"+f)){var h=u.variables[f],m=void 0!==h.value&&h.value,v="object"==typeof h.attributes&&h.attributes,b=void 0!==h.single_parse&&h.single_parse;if(!1!==v||!1===m){if(("object"==typeof h.attributes?h.attributes.length:0)>0){var g=0;do{var y=e.indexOf("#"+f,g);if(-1!==y){var k=-1,w=-1,x=e.substring(y+f.length+1);if("("===x.substring(0,1)&&(k=y+f.length+1,-1!==(w=this.get_bracket_finish_index(x))&&(w+=k)),-1===k||-1===w){g+=f.length+1,F="#"+f;var S=[]}else{g=w;var j=e.substr(k+1,w-1-k),F=e.substr(y,w+1-y),W=void 0!==h.attribute_separator?h.attribute_separator:",";S=this.string_to_attributes(j,W)}for(var O in v)if(v.hasOwnProperty(O)){var M=v[O],C=M.id,I=void 0!==S[O];if((void 0===M.required||M.required)&&!I)return this.error("error_parse_variable_syntax_error_attribute","#"+f+" (Expected "+C+")","parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_attribute","#"+f+" (Expected "+C+")"));var D=void 0!==M.default&&M.default;if(!1===D||I||(S[O]=D),void 0===M.trim||M.trim){var E=S[O];"string"==typeof E&&(S[O]=E.trim())}var N=void 0!==M.valid&&M.valid;if(!1!==N&&!N.includes(S[O]))return this.error("error_parse_variable_syntax_error_attribute_invalid","#"+f+" (Expected "+N.join(", ")+")","parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_attribute_invalid","#"+f+" (Expected "+N.join(", ")+")"))}var P="",T=!0;switch(f){case"tab_label":if(isNaN(S[0]))return this.error("error_parse_variable_syntax_error_group_id",S[0],"parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_group_id",S[0]));var z=parseInt(S[0],10);if(void 0===this.group_data_cache[z]||void 0===this.group_data_cache[z].label)return this.error("error_parse_variable_syntax_error_group_id",z,"parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_group_id",z));P=this.group_data_cache[z].label;break;case"section_label":if(isNaN(S[0]))return this.error("error_parse_variable_syntax_error_section_id",S[0],"parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_section_id",S[0]));var q=parseInt(S[0],10);if(void 0===this.section_data_cache[q]||void 0===this.section_data_cache[q].label)return this.error("error_parse_variable_syntax_error_section_id",q,"parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_section_id",q));P=this.section_data_cache[q].label;break;case"field_label":if(isNaN(S[0]))return this.error("error_parse_variable_syntax_error_field_id",S[0],"parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_field_id",S[0]));var R=parseInt(S[0],10);if(void 0===this.field_data_cache[R]||void 0===this.field_data_cache[R].label)return this.error("error_parse_variable_syntax_error_field_id",R,"parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_field_id",R));P=this.field_data_cache[R].label;break;case"field":case"field_float":case"field_date_offset":case"ecommerce_field_price":if(isNaN(S[0]))return this.error("error_parse_variable_syntax_error_field_id",S[0],"parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_field_id",S[0]));R=parseInt(S[0],10);if(("field_value"===r||!1===r)&&R===parseInt(i.id,10))return this.error("error_parse_variable_syntax_error_self_ref",F,"parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_self_ref",F));if(void 0===this.field_data_cache[R])return this.error("error_parse_variable_syntax_error_field_id",R,"parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_field_id",R));_<=2&&d.push(R);var Y=this.field_data_cache[R];if(void 0===$.WS_Form.field_type_cache[Y.type])break;var A=$.WS_Form.field_type_cache[Y.type];if(!1!==a)if(!(A[a+"_out"],A[a+"_out"]))return this.error("error_parse_variable_syntax_error_"+a+"_out",Y.label+" (ID: "+Y.id+")","parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_"+a+"_out",Y.label+" (ID: "+Y.id+")"));var L=(A.static,A.static);if(L){if(!0===L)var U=void 0!==A.mask_field_static?A.mask_field_static:"";else{U=this.get_object_meta_value(Y,L,"");this.field_wpautop(Y,A)&&(U=this.wpautop(U),T=!1)}"object"==typeof(ge=this.parse_variables_process(U,t,a,Y,r,s,o,_+1)).fields&&(d=d.concat(ge.fields)),P=[ge.output];break}var H=void 0!==A.submit_array&&A.submit_array,J=void 0!==Y.section_repeatable_section_id&&parseInt(Y.section_repeatable_section_id),G=void 0!==i.section_repeatable_section_id&&parseInt(i.section_repeatable_section_id),Z=t;P=!1;if(!1!==Z&&J===o||!1!==J&&!1!==G)P=this.get_field_value(Y,Z,H);if(!1===P&&!1!==J&&!1===G)P=this.get_field_value(Y,!0,H,l);if(!1===P&&!1===J)P=this.get_field_value(Y,!1,H,l);if(!1===P)switch(Y.type){case"price_select":case"price_checkbox":case"price_radio":case"select":case"checkbox":case"radio":var B=this.get_data_source(Y);P=!1!==B.default_value?B.default_value:[];break;default:var V=this.get_object_meta_value(Y,"default_value","");"object"==typeof(ge=this.parse_variables_process(V,t,a,Y,r,s,o,_+1)).fields&&(d=d.concat(ge.fields)),P=[ge.output]}if(l)if(P.length)switch(Y.type){case"price_select":case"price_checkbox":case"price_radio":case"price":case"price_subtotal":case"cart_price":case"cart_total":var X=0;for(var K in P)P.hasOwnProperty(K)&&(X+=this.get_number(P[K],0,!0));var Q=parseInt($.WS_Form.settings_plugin.price_decimals,10);P=this.get_number(X,0,!1,Q);break;case"datetime":if(""===P[0]){P="";break}var ee=this.get_object_meta_value(Y,"input_type_datetime","date");(re=this.get_object_meta_value(Y,"format_date",ws_form_settings.date_format))||(re=ws_form_settings.date_format);var te=this.get_date(P[0],ee,re);P=this.get_number(te.getTime())/1e3;break;default:X=0;for(var K in P)P.hasOwnProperty(K)&&(X+=this.get_number(P[K],0,!1));P=X}else P=0;else P=P.join(",");switch(f){case"ecommerce_field_price":P=this.get_price(this.get_number(P));break;case"field_date_offset":if("datetime"!==Y.type)return this.error("error_parse_variable_syntax_error_field_date_offset",R,"parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_field_date_offset",R));var ae=this.parse_variables_process(P,t,a,Y,r,s,o,_).output,ie=this.get_object_meta_value(Y,"format_date",ws_form_settings.date_format);if(ie||(ie=ws_form_settings.date_format),"calc"===a)ne=new Date(1e3*parseInt(ae));else{ee=this.get_object_meta_value(Y,"input_type_datetime","date");ne=this.get_date(ae,ee,ie)}if(!1!==ne&&!isNaN(ne.getTime())){if((ce=parseInt(this.parse_variables_process(S[1],t,a,i,r,s,o,_).output))&&ne.setSeconds(ne.getSeconds()+ce),void 0!==S[2]&&""!=S[2])var re=S[2];else re=ie;re||(re=ws_form_settings.date_format),P=this.date_format(ne,re)}break;case"field_float":P=this.get_number(P)}"field"===f&&this.field_wpautop(Y,A)&&(P=this.wpautop(P),T=!1);break;case"ecommerce_price":"object"==typeof(ge=this.parse_variables_process(S[0],t,a,i,r,s,o,_)).fields&&(d=d.concat(ge.fields));var se=this.eval_process(ge.output);P=this.get_price(se);break;case"select_option_text":if(isNaN(S[0]))return this.error("error_parse_variable_syntax_error_field_id",S[0],"parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_field_id",S[0]));R=parseInt(S[0]);void 0===(_e=S[1])&&(_e=", "),_<=2&&d.push(R);var oe=ws_form_settings.field_prefix+parseInt(R,10)+(t?"["+t+"]":"");if((le=$('[name="'+oe+'[]"] option:selected',this.form_canvas_obj)).length)P=$.map(le,function(e,t){return $(e).text()}).join(_e);break;case"query_var":P=this.get_query_var(S[0]);break;case"checkbox_label":case"radio_label":if(isNaN(S[0]))return this.error("error_parse_variable_syntax_error_field_id",S[0],"parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_field_id",S[0]));var _e;R=parseInt(S[0]);void 0===(_e=S[1])&&(_e=", "),_<=2&&d.push(R);var le;oe=ws_form_settings.field_prefix+parseInt(R,10)+(t?"["+t+"]":"");if((le=$('[name="'+oe+'[]"]:checked',this.form_canvas_obj)).length)P=$.map(le,function(e,t){return $('label[for="'+$(e).attr("id")+'"]').text()}).join(_e);break;case"post_date_custom":case"server_date_custom":case"blog_date_custom":var ne=new Date(m);if(void 0!==S[1])(ce=parseInt(this.parse_variables_process(S[1],t,a,i,r,s,o,_).output))&&ne.setSeconds(ne.getSeconds()+ce);P=this.date_format(ne,S[0]);break;case"client_date_custom":var ce;ne=new Date;if(void 0!==S[1])(ce=parseInt(this.parse_variables_process(S[1],t,a,i,r,s,o,_).output))&&ne.setSeconds(ne.getSeconds()+ce);P=this.date_format(ne,S[0]);break;case"random_number":var de=parseInt(this.get_number(S[0]),10),pe=parseInt(this.get_number(S[1]),10);P=Math.floor(Math.random()*(pe-de+1))+de;break;case"random_string":var ue=parseInt(this.get_number(S[0]),10),fe=S[1],he=fe.length;P="";for(var me=0;me<ue;me++)P+=fe[Math.floor(Math.random()*he)];break;case"abs":case"ceil":case"cos":case"exp":case"floor":case"log":case"negative":case"positive":case"sin":case"sqrt":case"tan":"object"==typeof(ge=this.parse_variables_process(S[0],t,a,i,r,s,o,_)).fields&&(d=d.concat(ge.fields));se=this.eval_process(ge.output);switch(f){case"abs":P=Math.abs(se);break;case"ceil":P=Math.ceil(se);break;case"cos":P=Math.cos(se);break;case"exp":P=Math.exp(se);break;case"floor":P=Math.floor(se);break;case"log":P=Math.log(se);break;case"negative":case"positive":P="positive"==f?Math.max(0,se):Math.min(0,se);break;case"sin":P=Math.sin(se);break;case"sqrt":P=Math.sqrt(se);break;case"tan":P=Math.tan(se)}break;case"lower":case"upper":case"ucwords":case"ucfirst":case"capitalize":case"sentence":case"wpautop":if("string"==typeof S[0])switch("object"==typeof(ge=this.parse_variables_process(S[0],t,a,i,r,s,o,_)).fields&&(d=d.concat(ge.fields)),P=ge.output,f){case"lower":P=P.toLowerCase();break;case"upper":P=P.toUpperCase();break;case"ucwords":P=this.ucwords(P);break;case"ucfirst":P=this.ucfirst(P);break;case"capitalize":P=this.capitalize(P);break;case"sentence":P=this.sentence(P);break;case"wpautop":P=this.wpautop(P),T=!1}break;case"pow":"object"==typeof(ge=this.parse_variables_process(S[0],t,a,i,r,s,o,_)).fields&&(d=d.concat(ge.fields));var ve=this.eval_process(ge.output,ye);"object"==typeof(ge=this.parse_variables_process(S[1],t,a,i,r,s,o,_)).fields&&(d=d.concat(ge.fields));var be=this.eval_process(ge.output,ye);P=Math.pow(ve,be);break;case"round":var ge=this.parse_variables_process(S[1],t,a,i,r,s,o,_),ye=this.get_number(ge.output);"object"==typeof(ge=this.parse_variables_process(S[0],t,a,i,r,s,o,_)).fields&&(d=d.concat(ge.fields)),P=this.eval_process(ge.output,ye);break;case"min":case"max":var ke=[];for(var we in S)if(S.hasOwnProperty(we)){"object"==typeof(ge=this.parse_variables_process(S[we],t,a,i,r,s,o,_)).fields&&(d=d.concat(ge.fields));se=this.eval_process(ge.output);ke.push(se)}P=ke.length>0?"min"==f?Math.min(...ke):Math.max(...ke):0;break;case"avg":X=0;if(1===S.length)"object"==typeof(ge=this.parse_variables_process(S[0],t,a,i,r,s,o,_)).fields&&(d=d.concat(ge.fields)),S=this.string_to_attributes(ge.output);for(var we in S){if(S.hasOwnProperty(we))"object"==typeof(ge=this.parse_variables_process(S[we],t,a,i,r,s,o,_)).fields&&(d=d.concat(ge.fields)),X+=se=this.eval_process(ge.output)}P=X/S.length}!1!==P&&(T&&(P=this.html_encode(P)),b?c[F.substring(1)]=P:n[F.substring(1)]=P)}}while(-1!==y);e=this.mask_parse(e,n)}}else n[f]=m}}if(-1!=e.indexOf("form")&&(n.form_id=this.form_id,n.form_instance_id=this.form_instance_id,n.form_obj_id=this.form_obj_id,n.form_label=this.form.label,n.form_checksum=this.form.published_checksum,n.form_framework=this.framework.name),-1!=e.indexOf("section")){n.section_row_index=t;var $e=1;!1===o&&!1!==i&&void 0!==i.section_id&&parseInt(i.section_id)>0&&(o=parseInt(i.section_id)),"object"==typeof this.section_repeatable_indexes["section_"+o]&&($e=this.section_repeatable_indexes["section_"+o].indexOf(t.toString())+1)<=0&&($e=1),n.section_row_number=$e}if(-1!=e.indexOf("submit")&&(n.submit_hash=this.hash),-1!=e.indexOf("client")){var xe=new Date;n.client_time=this.date_format(xe,ws_form_settings.time_format),n.client_date=this.date_format(xe,ws_form_settings.date_format)}-1!=e.indexOf("seconds_epoch_midnight")&&((Se=new Date).setHours(0,0,0,0),n.seconds_epoch_midnight=Math.round(Se.getTime()/1e3));if(-1!=e.indexOf("seconds_epoch")){var Se=new Date;n.seconds_epoch=Math.round(Se.getTime()/1e3)}var je=e;(e=this.mask_parse(e,n),(e=this.mask_parse(e,c,!0))!==je&&-1!==e.indexOf("#"))&&(e=(ge=this.parse_variables_process(e,t,a,i,r,s,o,_+1)).output,"object"==typeof ge.fields&&(d=d.concat(ge.fields)));return{output:e,fields:d}},$.WS_Form.prototype.field_wpautop=function(e,t){var a=void 0!==t.wpautop&&t.wpautop,i=void 0!==t.wpautop_conditions&&t.wpautop_conditions;if(!1!==i&&"object"==typeof i)for(var r in a=!1,i)if(i.hasOwnProperty(r)){var s=i[r];this.get_object_meta_value(e,r,"")===s&&(a=!0)}return a},$.WS_Form.prototype.eval_process=function(eval_input,decimals){try{var eval_output=eval(eval_input);return eval_output===1/0&&(eval_output=0),this.get_number(eval_output,0,!1,decimals)}catch(e){return 0}},$.WS_Form.prototype.closing_string_index=function(e,t,a,i){for(var r=1;r>0;){var s=e.indexOf(a,i),o=e.indexOf(t,i);if(-1!==s&&-1!==o&&s<o)i=s+a.length,r++;else{if(!(-1!==o&&r>1)){if(-1!==o&&1===r)break;break}i=o+t.length,r--}}return o},$.WS_Form.prototype.string_to_attributes=function(e,t){if("string"!=typeof e)return[];if("string"!=typeof t&&(t=","),""==e)return[];var a=1,i=0,r=!1,s="",o=[];for(e.replace("“",'"'),e.replace("”",'"');a>0||i<e.length;){var _=e[i];if(null==_)break;if(_!==t||1!==a||r)if('"'!==_||1!==a){if(!r){switch(_){case"(":a++;break;case")":a--}if(0===a)break}s+=_,i++}else r||(s=""),r=!r,i++;else o.push(s),s="",i++}return o.push(s),o.length&&(o=o.map(function(e){return e=e.replace(/^"(.+(?="$))"$/,"$1")})),o},$.WS_Form.prototype.get_bracket_finish_index=function(e){if(""===e)return-1;e.replace("“",'"'),e.replace("”",'"');for(var t=1,a=1,i=!1;t>0||a<e.length;){var r=e[a];if(void 0===r)break;if('"'!==r){if(!i){switch(r){case"(":t++;break;case")":t--}if(0===t)break}a++}else i=!i,a++}return 0===t?a:(this.error("error_parse_variable_syntax_error_bracket_closing",e,"parse-variables"),-1)},$.WS_Form.prototype.parse_variables_process_error=function(e){return{output:e,functions:[],fields:[]}},$.WS_Form.prototype.get_field_value=function(e,t,a,i){var r=this;if(void 0===t&&(t=!1),void 0===a&&(a=!1),!1===t){var s='[name="'+ws_form_settings.field_prefix+e.id;a&&(s+="[]")}else if(!0===t)s='[name^="'+ws_form_settings.field_prefix+e.id+"[";else{s='[name="'+ws_form_settings.field_prefix+e.id+"["+t+"]";a&&(s+="[]")}if(!$(s+='"]').length)return!1;switch(e.type){case"checkbox":case"radio":case"price_checkbox":case"price_radio":s+=":checked"}var o=[];return $(s,this.form_canvas_obj).each(function(){if(i)switch(e.type){case"select":$(this).find("option:selected").each(function(){o.push($(this).val())});break;case"price_select":$(this).find("option:selected").each(function(){o.push(r.get_number($(this).attr("data-price"),0,!0))});break;case"price_checkbox":case"price_radio":o.push($(this).is(":checked")?r.get_number($(this).attr("data-price"),0,!0):0);break;default:o.push($(this).val())}else switch(e.type){case"file":var t=[];switch($(this).attr("data-file-type")){case"dropzonejs":var a=$(this).closest('[data-type="file"]');if(a){var s=$(".dropzone",a)[0].dropzone;if(s.files)t=s.files}break;default:t=$(this)[0].files}var _=[];for(var l in t)if(t.hasOwnProperty(l)){var n=t[l];_.push(n.name)}o.push(_.join(","));break;case"googlemap":var c=$(this).val();if(!c)break;try{var d=JSON.parse(c)}catch(e){break}void 0!==d.lat&&void 0!==d.lng&&o.push(d.lat+","+d.lng);break;default:o.push($(this).val())}}),o},$.WS_Form.prototype.get_data_source=function(e){var t={default_value:[]};e=this.field_data_cache[e.id];if(void 0===$.WS_Form.field_type_cache[e.type])return!1;var a=$.WS_Form.field_type_cache[e.type];if(void 0===a.data_source)return!1;var i=a.data_source;if(void 0===i.type)return!1;switch(t.type=i.type,t.type){case"data_grid":if(void 0===i.id)return!1;t.meta_key_data_grid=i.id,t.meta_key_value_column=(a.datagrid_column_value,a.datagrid_column_value),t.data_grid=this.get_object_meta_value(e,t.meta_key_data_grid,!1),t.value_column_id=this.get_object_meta_value(e,t.meta_key_value_column,!1);var r=(t.data_grid.columns,t.data_grid.columns);for(var s in t.value_column_index=!1,r)if(r.hasOwnProperty(s)){var o=r[s];if(void 0!==o.id&&o.id==t.value_column_id){t.value_column_index=s;break}}if(!1!==t.value_column_id&&void 0!==t.data_grid.groups){var _=t.data_grid.groups;for(var l in _)if(_.hasOwnProperty(l)){var n=_[l];if(void 0!==n.rows){var c=n.rows;for(var d in c)if(c.hasOwnProperty(d)){var p=c[d];if(void 0!==p.default&&"on"===p.default){if(void 0===p.data)continue;if(void 0===p.data[t.value_column_index])continue;t.default_value.push(p.data[t.value_column_index])}}}}}}return t},$.WS_Form.prototype.get_query_var=function(e){var t=window.location.href;if(!t)return"";try{e=e.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return a&&a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):""}catch(e){return""}},$.WS_Form.prototype.set_object_meta_value=function(e,t,a){return void 0===e?a:void 0===e.meta?a:void(e.meta[t]=a)},$.WS_Form.prototype.column_class_array=function(e,t){void 0===t&&(t="breakpoint");var a=[],i=this.framework.breakpoints,r=this.framework.columns.column_class,s=this.framework.columns.offset_class,o=0,_=0;for(var l in i)if(i.hasOwnProperty(l)){var n=i[l],c=this.get_object_meta_value(e,t+"_size_"+l,"");if(""==c&&(c="0"),0==(c=parseInt(c,10))){if(void 0!==n.column_size_default)switch(n.column_size_default){case"column_count":c=parseInt($.WS_Form.settings_plugin.framework_column_count,10);break;default:c=parseInt(n.column_size_default,10)}}else c=parseInt(c,10);if(c>0&&c!=o){var d={id:n.id,size_word:void 0===this.number_to_word[c]?c:this.number_to_word[c],size:c};if(void 0!==n.column_class)var p=n.column_class;else p=r;var u=this.mask_parse(p,d);a.push(u),o=c}var f=this.get_object_meta_value(e,t+"_offset_"+l,""),h=!1;if(""!==f&&f!=_){d={id:n.id,offset_word:void 0===this.number_to_word[f]?f:this.number_to_word[f],offset:f};if(void 0!==n.offset_class)var m=n.offset_class;else m=s;u=this.mask_parse(m,d);a.push(u),_=f,h=!0}h&&a.push("wsf-has-offset")}return a},$.WS_Form.prototype.column_classes_render=function(e,t,a){e.closest(".wsf-sections").css("min-height","auto"),e.closest(".wsf-fields").css("min-height","auto"),void 0===a&&(a=!0);for(var i=this.column_class_array(t),r=0;r<i.length;r++)a?e.addClass(i[r]):e.removeClass(i[r])},$.WS_Form.prototype.mask_parse=function(e,t,a){if("string"!=typeof e)return"";void 0===a&&(a=!1);var i=[],r=Object.keys(t);r.sort(function(e,t){if(e===t)return 0;var a=-1!==e.indexOf("("),i=-1!==t.indexOf("(");return a&&i?e<t?1:-1:!a&&i||a&&!i?a<i?1:-1:e<t?1:-1});for(var s=0;s<r.length;s++)i[r[s]]=t[r[s]];for(var o in t=i)if(t.hasOwnProperty(o)){var _=t[o];e=a?e.replace("#"+o,_):this.replace_all(e,"#"+o,_)}return e},$.WS_Form.prototype.get_field_label=function(e){return this.field_data_cache[e].label},$.WS_Form.prototype.get_section_label=function(e){return this.section_data_cache[e].label},$.WS_Form.prototype.language=function(e,t,a,i){void 0===t&&(t=!1),void 0===a&&(a=!0),void 0===i&&(i=!1);var r="",s="";if("error_language"===e)r="Language reference not found: %s";else if(null!==$.WS_Form.settings_form&&void 0!==$.WS_Form.settings_form.language&&void 0!==$.WS_Form.settings_form.language[e])r=$.WS_Form.settings_form.language[e];return""==r?"error_language"===e||i||this.error("error_language",e):(!1!==t&&(r=this.replace_all(r,"%s",t)),s=a?this.html_encode(r):r),""==s&&(s=""==t?"[LANGUAGE NOT FOUND: "+e+"]":t),s},$.WS_Form.prototype.cookie_set=function(e,t,a,i){void 0===a&&(a=!0),void 0===i&&(i=!0);var r=this.get_object_value($.WS_Form.settings_plugin,"cookie_prefix");if(!r)return!1;if(""==t){if(""==this.cookie_get(e,""))return!1;(o=new Date).setTime(o.getTime()-864e5);var s="expires="+o.toUTCString()+";"}else if(a){var o,_=this.get_object_value($.WS_Form.settings_plugin,"cookie_timeout");if(!_)return!1;(o=new Date).setTime(o.getTime()+1e3*_);s="expires="+o.toUTCString()+";"}else s="";var l=r+"_"+(i?this.form_id+"_":"")+e+"="+t+";"+s+"path=/";return document.cookie=l,!0},$.WS_Form.prototype.cookie_get=function(e,t,a){void 0===a&&(a=!0);var i=this.get_object_value($.WS_Form.settings_plugin,"cookie_prefix");if(!i)return t;for(var r=i+"_"+(a?this.form_id+"_":"")+e+"=",s=decodeURIComponent(document.cookie).split(";"),o=0;o<s.length;o++){for(var _=s[o];" "==_.charAt(0);)_=_.substring(1);if(0==_.indexOf(r))return _.substring(r.length,_.length)}return void 0!==t?t:""},$.WS_Form.prototype.cookie_clear=function(e,t){void 0===t&&(t=!0);var a=this.get_object_value($.WS_Form.settings_plugin,"cookie_prefix");if(!a)return!1;var i=new Date;i.setTime(i.getTime()-36e5);var r="expires="+i.toUTCString(),s=a+"_"+(t?this.form_id+"_":"")+e+"='';"+r+";path=/";return document.cookie=s,!0},$.WS_Form.prototype.set_caret_at_end=function(e){var t=e.value.length;if(document.selection){e.focus();var a=document.selection.createRange();a.moveStart("character",-t),a.moveStart("character",t),a.moveEnd("character",0),a.select()}else(e.selectionStart||"0"==e.selectionStart)&&(e.selectionStart=t,e.selectionEnd=t,e.focus())},$.WS_Form.prototype.tabs=function(e,t){void 0===t&&(t={});var a=void 0!==t.selector?t.selector:"li",i=void 0!==t.active?t.active:0,r=void 0!==t.activate&&t.activate,s=this,o=0;e.addClass("wsf-tabs"),$(a,e).each(function(){var e=$(this);e.find('a[href*="#"]:not([href="#"])').each(function(){$(this).attr("data-tab-index",o),$(this).off("click").on("click",function(t){t.preventDefault(),$(this).trigger("wsf-click"),t.stopPropagation(),t.stopImmediatePropagation(),s.tab_show($(this),e,r)}),o==i&&s.tab_show($(this),e)}),o++})},$.WS_Form.prototype.tabs_destroy=function(e,t){void 0===t&&(t={});var a=void 0!==t.selector?t.selector:"li";$(a,e).each(function(){$(this).find("a").each(function(){$(this).removeAttr("data-tab-index"),$(this).off("click")})}),e.removeClass("wsf-tabs")},$.WS_Form.prototype.tab_show=function(e,t,a){var i=this;t.siblings().each(function(){var e=$(this).find("a").first();i.tab_hide(e,$(this))}),t.addClass("wsf-tab-active");var r=e.attr("href");($(r).show(),"function"==typeof a)&&a(e.attr("data-tab-index"));e.trigger("tab_show")},$.WS_Form.prototype.tab_hide=function(e,t){t.removeClass("wsf-tab-active");var a=e.attr("href");$(a).hide()},$.WS_Form.prototype.data_cache_build=function(){if(void 0===this.form)return!1;if(void 0===this.form.groups)return!1;for(var e in this.group_data_cache=[],this.section_data_cache=[],this.field_data_cache=[],this.action_data_cache=[],this.form.groups)if(this.form.groups.hasOwnProperty(e)){var t=this.form.groups[e];this.data_cache_build_group(t)}var a=this.get_object_meta_value(this.form,"action",!1);if(!1!==a&&void 0!==a.groups&&void 0!==a.groups[0]&&"object"==typeof a.groups[0].rows&&0!=a.groups[0].rows.length){var i=a.groups[0].rows;for(var r in i)if(i.hasOwnProperty(r)){var s=i[r];void 0!==s.data&&0!=s.data.length&&(this.action_data_cache[s.id]={label:s.data[0]})}}return!0},$.WS_Form.prototype.data_cache_build_group=function(e){for(var t in this.group_data_cache[e.id]=e,e.sections)if(e.sections.hasOwnProperty(t)){var a=e.sections[t];this.data_cache_build_section(a)}return!0},$.WS_Form.prototype.data_cache_build_section=function(e){this.section_data_cache[e.id]=e;var t=void 0!==e.meta&&void 0!==e.meta.section_repeatable&&"on"==e.meta.section_repeatable;for(var a in e.fields)if(e.fields.hasOwnProperty(a)){var i=e.fields[a];t&&(i.section_repeatable_section_id=e.id),void 0!==$.WS_Form.field_type_cache[i.type]&&(this.field_data_cache[i.id]=i)}return!0},$.WS_Form.prototype.array_randomize=function(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[a],e[a]=i}return e},$.WS_Form.prototype.get_nice_duration=function(e){if(0==e)return"-";var t=~~(e/3600),a=~~(e%3600/60),i=e%60,r="";return t>0&&(r+=t+" "+this.language("submit_duration_hours")+" "),a>0&&(r+=a+" "+this.language("submit_duration_minutes")+" "),r+=i+" "+this.language("submit_duration_seconds")},$.WS_Form.prototype.ucwords=function(e){return e.replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g,function(e){return e.toUpperCase()})},$.WS_Form.prototype.ucfirst=function(e){var t="";return e.length>0&&(t=e[0].toUpperCase(),e.length>1&&(t+=e.slice(1))),t},$.WS_Form.prototype.capitalize=function(e){return this.ucwords(e.toLowerCase())},$.WS_Form.prototype.sentence=function(e){return this.ucfirst(e.toLowerCase())},$.WS_Form.prototype.get_field_html_single=function(e,t,a,i){void 0===a&&(a=!1),void 0===i&&(i=!1);var r=[],s=void 0!==t,o=!a,_=!1!==i?"-repeat-"+i:"",l=this.get_part_id(e.id,i),n=this.get_field_name(e.id,i),c=["default","class","input_type_datetime","multiple","min","max","step"],d=["class"];if(void 0===$.WS_Form.field_type_cache[e.type])return"";var p=$.WS_Form.field_type_cache[e.type];if(p.pro_required)return this.language("error_pro_required");if(a)var u=!0;else u=this.get_object_meta_value(e,"label_render",!0);var f=this.get_object_meta_value(e,"sub_type",!1);if(""==f&&(f=!1),this.get_field_value_fallback(e.type,!1,"label_disabled",!1,!1,f)&&(u=!1),void 0!==p.submit_array&&p.submit_array&&(n+="[]"),u&&!a){var h=this.get_object_meta_value(e,"label_position","default");"default"==(h=this.get_field_value_fallback(e.type,!1,"label_position_force",h,!1,f))&&(h=this.get_object_meta_value(this.form,"label_position_form","top"))}else h="top";var m=!1;-1===this.get_framework().label_positions.indexOf(h)&&(h="top");var v=$.extend(!0,[],this.get_field_value_fallback(e.type,h,"mask_field_attributes",[],!1,f)),b=void 0!==p.mask_wrappers_drop&&p.mask_wrappers_drop,g=b?"#field":this.get_field_value_fallback(e.type,h,"mask","#field",!1,f),y=this.get_field_value_fallback(e.type,h,"mask_field","",!1,f);if(a){var k=this.get_field_value_fallback(e.type,h,"mask_field_submit",!1,!1,f);!1!==k&&(y=k)}var w=u?this.get_field_value_fallback(e.type,h,"mask_field_label","",!1,f):"",x=this.get_field_value_fallback(e.type,h,"mask_field_label_hide_group",!1,!1,f),S=this.get_field_value_fallback(e.type,h,"mask_help","",!1,f),j=this.get_field_value_fallback(e.type,h,"mask_help_append","",!1,f),F=this.get_field_value_fallback(e.type,h,"mask_help_append_separator","",!1,f),W=this.get_field_value_fallback(e.type,h,"mask_invalid_feedback","",!1,f),O=this.get_object_meta_value(e,"default_value","",!1,!0),M=this.get_object_meta_value(e,"text_editor","",!1,!0),C=this.get_object_meta_value(e,"html_editor","",!1,!0),I=this.get_object_meta_value(e,"dedupe_value_scope","",!1,!0),D=this.get_object_meta_value(e,"hidden_bypass","",!1,!0),E=this.get_object_meta_value(e,"exclude_cart_total","",!1,!0);if(!s){t="";""!=O&&(t=this.html_encode(O)),""!=M&&(t=M),""!=C&&(t=C)}var N=!0,P="";switch(e.type){case"textarea":N=""===this.get_object_meta_value(e,"input_type_textarea","")}var T=N?this.parse_variables_process(this.get_object_meta_value(e,"prepend",""),i,!1,e,"field_prepend",o).output:"";P+=N?this.parse_variables_process(this.get_object_meta_value(e,"append",""),i,!1,e,"field_prepend",o).output:"";var z="";if(!a){var q=[],R=this.get_object_meta_value(this.form,"class_field","",!1,!0);if(""!=R&&q.push(R),""!=(z=this.get_object_meta_value(e,"class_field","",!1,!0))&&q.push(z),!this.get_object_meta_value(e,"class_field_full_button_remove","")){var Y=this.get_field_value_fallback(e.type,h,"class_field_full_button","",!1,f);"object"==typeof Y&&q.push(Y.join(" "))}if(!(A=this.get_object_meta_value(e,"class_field_button_type",!1)))var A=this.get_field_value_fallback(e.type,h,"class_field_button_type_fallback",!1,!1,f);if(A){var L=this.get_field_value_fallback(e.type,h,"class_field_button_type","",!1,f);void 0!==L[A]&&q.push(L[A])}if(""!==T||""!==P){var U=this.get_field_value_fallback(e.type,h,"class_field_input_group","",!1,f);""!==U&&q.push(U)}var H=void 0!==p.label_inside&&p.label_inside;if(H&&"inside"===h){switch(e.type){case"textarea":var J=this.get_object_meta_value(e,"input_type_textarea",!1);m=!("tinymce"===J||"html"===J);break;case"select":case"price_select":m=!this.get_object_meta_value(e,"select2",!1);break;default:m=!0}m||(h="top")}H||"inside"!==h||(h="top"),m&&(e.meta.placeholder=this.parse_variables_process(e.label,i,!1,e,"field_label",o).output),z=q.join(" ")}var G=parseInt($.WS_Form.settings_plugin.framework_column_count,10),Z=parseInt(this.get_object_meta_value(this.form,"label_column_width_form",3),10),B=this.get_object_meta_value(e,"label_column_width","default");switch(B){case"default":case"":B=Z;break;default:B=parseInt(B,10)}B>=G&&(B=G-1);var V=G-B,X={id:l,form_id_prefix:this.form_id_prefix,form_id:this.form_id,form_instance_id:this.form_instance_id,field_id:e.id,name:n,label:this.parse_variables_process(e.label,i,!1,e,"field_label",o).output,value:t,required:this.get_object_meta_value(this.form,"label_required")?'<span class="wsf-required-wrapper"></span>':"",column_width_label:B,column_width_field:V,max_upload_size:ws_form_settings.max_upload_size,locale:ws_form_settings.locale,currency:$.WS_Form.settings_plugin.currency},K=this.get_field_value_fallback(e.type,h,"meta_key_parse_variables",[],!1,f);for(var Q in K)if(K.hasOwnProperty(Q)){var ee=K[Q],te=!1!==(at=void 0!==$.WS_Form.meta_keys[ee]&&$.WS_Form.meta_keys[ee])?void 0===at.d?"":at.d:"",ae=this.get_object_meta_value(e,ee,te);"object"==typeof ae&&(ae=JSON.stringify(ae)),ae=this.replace_all(ae,"'","&#39;"),X[ee]=ae}var ie=$.extend(!0,{},X);ie.label_id=this.get_part_id(e.id,i,"label");var re=[],se=this.get_part_id(e.id,i,"help"),oe=""!==(_e=a?"":this.get_object_meta_value(e,"help","",!1,!1)),_e=this.parse_variables_process(_e,i,!1,e,"field_help",o).output;if(a)switch(e.type){case"range":_e="#value"}var le=this.get_field_value_fallback(e.type,h,"class_help",[],!1,f);re.id=l,re.help_id=se,re.help_class=le.join(" "),re.help=_e,X.help_class=le.join(" ");var ne=!a&&this.get_object_meta_value(e,"invalid_feedback_render",!1,!1,!0),ce=!1;if(ne){var de=$.extend(!0,{},X),pe=this.form_id_prefix+"invalid-feedback-"+e.id+_,ue=this.get_field_value_fallback(e.type,h,"class_invalid_feedback",[],!1,f),fe=(ce=this.get_field_value_fallback(e.type,h,"invalid_feedback_last_row",!1,!1,f),this.get_object_meta_value(e,"invalid_feedback","",!1,!0)),he=void 0!==p.invalid_feedback?p.invalid_feedback:this.invalid_feedback_mask_placeholder;if(""==fe&&""!=he){var me=e.label;fe=this.replace_all(he,"#label_lowercase",me.toLowerCase());fe=this.replace_all(fe,"#label",me)}de.invalid_feedback_id=pe,de.invalid_feedback_class=ue.join(" "),de.invalid_feedback=fe,de.attributes="";var ve=this.mask_parse(W,de)}else pe=!1,ve="";if(X.invalid_feedback=ve,ie.invalid_feedback=ve,X.attributes="",a)v=c.filter(function(e){return-1!=v.indexOf(e)});if(v.length>0){var be=this.get_attributes(e,v,!1,i);X.attributes+=" "+be.attributes,v=be.mask_attributes,r=be.attribute_values}!1!==i&&(X.attributes+=' data-repeatable-index="'+i+'"');var ge=this.get_object_meta_value(e,"custom_attributes",!1);if(!1!==ge&&"object"==typeof ge&&ge.length>0)for(var ye in ge)if(ge.hasOwnProperty(ye)){var ke=ge[ye];""!=ke.custom_attribute_name&&(ke.custom_attribute_value=this.parse_variables_process(ke.custom_attribute_value,i,!1,e).output,X.attributes=this.attribute_modify(X.attributes,ke.custom_attribute_name,ke.custom_attribute_value,!0))}var we=this.get_object_meta_value(e,"orientation",!1);if("grid"==we)var $e=this.get_field_value_fallback(e.type,h,"class_orientation_wrapper",[],!1,f),xe=this.get_field_value_fallback(e.type,h,"class_orientation_row",[],!1,f),Se=$e.join(" "),je=this.column_class_array(e,"orientation_breakpoint"),Fe=(je=xe.concat(je)).join(" ");ie.attributes="";var We=$.extend(!0,[],this.get_field_value_fallback(e.type,h,"mask_field_label_attributes",[],!1,f));if(a)We=d.filter(function(e){return-1!=We.indexOf(e)});if(We.length>0){be=this.get_attributes(e,We,!1,i);ie.attributes+=be.attributes,We=be.mask_attributes}var Oe="",Me=this.get_object_value(p,"data_source",!1),Ce=0,Ie=!1!==Me;if(Ie){if(void 0===Me.type)Ie=!1;else var De=Me.type;if(void 0===Me.id)Ie=!1;else var Ee=Me.id}if(Ie){switch(De){case"data_grid":var Ne=this.get_object_meta_value(e,Ee,!1)}if(!1===Ne&&(Ie=!1),void 0===Ne.columns)Ie=!1;else var Pe=Ne.columns}if(Ie){var Te=this.get_field_value_fallback(e.type,h,"mask_group","",!1,f),ze=this.get_field_value_fallback(e.type,h,"mask_group_wrapper","",!1,f),qe=this.get_field_value_fallback(e.type,h,"mask_group_label","",!1,f),Re=this.get_field_value_fallback(e.type,h,"mask_group_always",!1,!1,f),Ye=this.get_field_value_fallback(e.type,h,"mask_row","",!1,f),Ae=this.get_field_value_fallback(e.type,h,"mask_row_placeholder","",!1,f),Le=this.get_field_value_fallback(e.type,h,"mask_row_field","",!1,f),Ue=this.get_field_value_fallback(e.type,h,"mask_row_label","",!1,f),He=this.get_field_value_fallback(e.type,h,"mask_row_lookups",[],!1,f),Je=this.get_field_value_fallback(e.type,h,"datagrid_column_value",!1,!1,f),Ge=this.get_field_value_fallback(e.type,h,"mask_row_default","",!1,f),Ze=this.get_field_value_fallback(e.type,h,"mask_row_required"," required data-required",!1,f),Be=this.get_field_value_fallback(e.type,h,"mask_row_disabled"," disabled",!1,f),Ve=(this.get_field_value_fallback(e.type,h,"mask_row_visible"," visible",!1,f),this.get_object_meta_value(e,"data_grid_rows_randomize","",!1,!0));if(Ve)this.get_object_meta_value(e,"data_source_term_hierarchy","",!1,!0)&&(Ve=!1);var Xe=this.get_object_meta_value(e,"placeholder_row","",!1,!0),Ke=this.get_object_meta_value(e,"multiple","",!1,!0);if(""!=Xe&&!Ke){var Qe=$.extend(!0,{},X);Qe.value=Xe,Oe+=this.mask_parse(Ae,Qe)}s&&"object"!=typeof t&&("string"!=typeof t&&(t=t.toString()),t=[t]);var et=[];for(var tt in He)if(He.hasOwnProperty(tt)){if(et[vt=He[tt]]=!1,!1===(xt=this.get_object_meta_value(e,vt,!1,!1,!0))){if(void 0===$.WS_Form.meta_keys[vt])continue;var at;(xt=void 0!==(at=$.WS_Form.meta_keys[vt]).d?at.d:0)>Pe.length&&(xt=0)}var it=!1;for(var rt in Pe){if(Pe.hasOwnProperty(rt))if(Pe[rt].id==xt){it=rt;break}}it&&(et[vt]=it)}if(void 0===Ne.groups)return this.error("error_data_source_groups"),"";var st=Ne.groups;Object.keys(st).length;for(var ot in Ve&&(st=this.array_randomize(st)),st)if(st.hasOwnProperty(ot)){var _t=$.extend(!0,{},X);_t.group_id=this.form_id_prefix+"datagrid-"+e.id+"-group-"+ot+_;var lt=st[ot];if(void 0===lt.label)return this.error("error_data_group_label"),"";switch(e.type){case"select":case"price_select":var nt=!0;break;default:nt=void 0===lt.label_render||lt.label_render}if(nt){var ct=$.extend(!0,{},X);ct.group_label=this.html_encode(lt.label),ct.label_row_id=this.form_id_prefix+"label-"+e.id+"-group-"+ot+_,_t.group_label=this.mask_parse(qe,ct)}else _t.group_label="";_t.disabled=void 0!==lt.disabled&&"on"==lt.disabled?" disabled":"";var dt=void 0!==lt.mask_group&&"on"==lt.mask_group||Re;dt&&x&&(w="");var pt="";if(void 0!==lt.rows){var ut=JSON.parse(JSON.stringify(lt.rows)),ft=this.get_object_meta_value(e,"select_all","");if(("checkbox"==e.type||"price_checkbox"==e.type)&&"on"==ft){var ht=!1,mt=!1;for(var vt in et)if(et.hasOwnProperty(vt)){var bt=et[vt];"checkbox_field_value"==vt&&(ht=bt),"checkbox_field_label"==vt&&(mt=bt),"checkbox_price_field_value"==vt&&(ht=bt),"checkbox_price_field_label"==vt&&(mt=bt)}ft={id:0,default:"",required:"",hidden:"",disabled:"",select_all:!0,data:[]};var gt=this.get_object_meta_value(e,"select_all_label","");""==gt&&(gt=this.language("select_all_label")),ft.data[ht]=gt,ft.data[mt]=gt,ut.unshift(ft)}for(var yt in Ve&&(ut=this.array_randomize(ut)),ut)if(ut.hasOwnProperty(yt)){var kt=ut[yt],wt=!ce||yt==ut.length-1,$t=$.extend(!0,{},X);for(var vt in $t.data_grid_row_value="",$t.data_grid_row_action_variable="",$t.data_grid_row_label="",$t.data_grid_row_woocommerce_cart="",et){if(et.hasOwnProperty(vt))if($t[vt]="",!1!==(it=et[vt])&&void 0!==kt.data[it]){null===(xt=kt.data[it])&&(xt="");var xt=this.parse_variables_process(xt.toString(),i,!1,e,"data_grid_row",o).output;switch($t[vt+"_html"]=this.html_encode(xt),e.type){case"range":case"price_range":var St=this.get_object_meta_value(e,"min",0);(""==St||isNaN(St))&&(St=0);var jt=this.get_object_meta_value(e,"max",100);(""==jt||isNaN(jt))&&(jt=100);var Ft=this.get_number(xt,!0),Wt=parseFloat(jt)-parseFloat(St),Ot=Wt>0?(Ft-St)/Wt*100:0;$t[vt+"_percentage"]=Ot,-1!==vt.indexOf("_field_percentage")&&($t.data_grid_row_value_percentage=Ot)}$t[vt+"_compare"]=xt;var Mt=!1;if(void 0!==$.WS_Form.meta_keys[vt]){var Ct=$.WS_Form.meta_keys[vt];void 0!==Ct.h&&Ct.h&&(xt=this.html_encode(xt));Mt=void 0!==Ct.pr&&Ct.pr}if(Mt){var It=this.get_number(xt),Dt=vt+"_currency",Et=this.get_price(It);$t[Dt]=Et,$t[vt]=It,-1!==vt.indexOf("_price_field_price")&&($t.data_grid_row_price=It),-1!==Dt.indexOf("_price_field_price_currency")&&($t.data_grid_row_price_currency=Et)}else $t[vt]=xt;-1!==vt.indexOf("_field_value")&&($t.data_grid_row_value=xt),-1!==vt.indexOf("_field_parse_variable")&&($t.data_grid_row_action_variable=xt),-1!==vt.indexOf("_field_label")&&($t.data_grid_row_label=xt),-1!==vt.indexOf("_field_wc")&&($t.data_grid_row_woocommerce_cart=xt)}}void 0!==p.mask_row_value&&($t.row_value=this.mask_parse(p.mask_row_value,$t)),void 0!==p.mask_row_price&&($t.row_price=this.mask_parse(p.mask_row_price,$t)),kt.select_all?$t.row_id=this.form_id_prefix+"field-"+e.id+"-group-"+ot+"-row-"+kt.id+_:$t.row_id=this.form_id_prefix+"field-"+e.id+"-row-"+kt.id+_,$t.data_id=kt.id;var Nt=$.extend(!0,{},$t),Pt=$.extend(!0,{},$t);Pt.label_id=this.form_id_prefix+"label-"+e.id+_,Pt.label_row_id=this.form_id_prefix+"label-"+e.id+"-row-"+kt.id+_;var Tt=[];(!s&&kt.default||s&&!1!==Je&&t.indexOf($t[Je+"_compare"])>-1||s&&void 0!==$t.row_value&&t.indexOf($t.row_value)>-1)&&(Tt.default=Ge),kt.disabled&&(Tt.disabled=Be),kt.required&&(Tt.required=Ze),Tt.dedupe_value_scope=I,Tt.hidden_bypass=D,Tt.exclude_cart_total=E,$t.attributes="",Pt.attributes="",Nt.attributes="";var zt=$.extend(!0,[],Tt);if(!a){var qt="horizontal"==we&&this.get_field_value_fallback(e.type,h,"class_inline",!1,!1,f);!1!==qt&&(zt.class=qt.join(" "));var Rt=this.get_field_value_fallback(e.type,h,"class_row",!1,!1,f);if(!1!==Rt&&(zt.class=!1!==qt?zt.class+" "+Rt.join(" "):Rt.join(" ")),kt.disabled){var Yt=this.get_field_value_fallback(e.type,h,"class_row_disabled",!1,!1,f);!1!==Yt&&(zt.class+=" "+Yt.join(" "))}}var At=$.extend(!0,[],this.get_field_value_fallback(e.type,h,"mask_row_attributes",[],!1,f));if(At.length>0){be=this.get_attributes(e,At,zt,i);$t.attributes+=" "+be.attributes}if(void 0!==kt.hidden&&kt.hidden&&!a)switch(e.type){case"select":continue;default:$t.attributes+=' style="display:none;"'}"grid"==we&&""!=Fe&&($t.attributes=this.attribute_modify($t.attributes,"class",Fe,!0));zt=$.extend(!0,[],Tt);var Lt=this.get_field_value_fallback(e.type,h,"class_row_field_label",!1,!1,f);!1!==Lt&&(zt.class=Lt.join(" "));var Ut=$.extend(!0,[],this.get_field_value_fallback(e.type,h,"mask_row_label_attributes",[],!1,f));if(a)Ut=d.filter(function(e){return-1!=Ut.indexOf(e)});if(Ut.length>0){be=this.get_attributes(e,Ut,zt,i);Pt.attributes+=" "+be.attributes}zt=$.extend(!0,[],Tt);var Ht=this.get_field_value_fallback(e.type,h,"class_row_field",!1,!1,f);!1!==Ht&&(zt.class=Ht.join(" ")),a||""==z||(zt.class+=" "+z.trim()),zt.aria_labelledby=Pt.label_row_id,(!s&&kt.default||s&&!1!==Je&&t.indexOf($t[Je+"_compare"])>-1)&&(zt.default=Ge),kt.disabled&&(zt.disabled=Be),kt.required&&(zt.required=Ze),zt.required_row=r.required;var Jt=$.extend(!0,[],this.get_field_value_fallback(e.type,h,"mask_row_field_attributes",[],!1,f));if(a)Jt=c.filter(function(e){return-1!=Jt.indexOf(e)});if(Jt.length>0){be=this.get_attributes(e,Jt,zt,i);Nt.attributes+=" "+be.attributes}if(""!=Nt.attributes&&(Nt.attributes=" "+Nt.attributes),void 0!==kt.select_all&&(Nt.attributes+=" data-wsf-select-all"),void 0!==kt.hierarchy&&""==we&&!Ve)switch(e.type){case"checkbox":case"price_checkbox":case"radio":case"price_radio":$t.attributes+=' data-wsf-hierarchy="'+kt.hierarchy+'"';break;case"select":case"price_select":kt.hierarchy>0&&($t.select_field_label="&nbsp;&nbsp;&nbsp;".repeat(kt.hierarchy)+$t.select_field_label)}if(ne&&!ce)if(pe=this.form_id_prefix+"invalid-feedback-"+e.id+"-row-"+kt.id+_,de.invalid_feedback_id=pe,ne)ve=this.mask_parse(W,de);else ve="";Nt.invalid_feedback=wt?ve:"",Pt.invalid_feedback=wt?ve:"";var Gt=this.mask_parse(Le,Nt);Pt.row_field=Gt,$t.row_field=Gt;var Zt=this.mask_parse(Ue,Pt);$t.row_label=Zt,pt+=this.mask_parse(Ye,$t),Ce++}}if(""!=ze){var Bt={group:pt};"grid"==we&&""!=Se&&(Bt.attributes=' class="'+Se+'"'),pt=this.mask_parse(ze,Bt)}!1!==Te&&dt?(_t.group=pt,Oe+=this.mask_parse(Te,_t)):Oe+=pt}}if(X.datalist=Ce>0?Oe:"",v.length>0){zt=[];void 0!==_t&&void 0!==_t.group_id&&Ce>0&&(zt.list=_t.group_id),""===this.get_object_meta_value(e,"aria_label",!1,!1,!0)&&(u&&-1!==w.indexOf("#attributes")?zt.aria_labelledby=this.form_id_prefix+"label-"+e.id+_:zt.aria_label=e.label),oe&&(zt.aria_describedby=se),!1!==(q=this.get_field_value_fallback(e.type,h,"class_field",!1,!1,f))&&(zt.class=q.join(" ")),""!=z&&(zt.class+=" "+z.trim()),""!=(be=this.get_attributes(e,v,zt,i)).attributes&&(X.attributes+=" "+be.attributes)}if(We.length>0){zt=[];var Vt=this.get_field_value_fallback(e.type,h,"class_field_label",!1,!1,f);!1!==Vt&&(zt.class=Vt.join(" ")),""!=(be=this.get_attributes(e,We,zt,i)).attributes&&(ie.attributes+=" "+be.attributes)}if(re.help_append_separator=oe?this.mask_parse(F,re):"",""!=j){re.text_clear=this.get_object_meta_value(e,"text_clear",""),""==re.text_clear&&(re.text_clear=this.language("clear")),re.text_reset=this.get_object_meta_value(e,"text_reset",""),""==re.text_reset&&(re.text_reset=this.language("reset"));var Xt=this.mask_parse(j,re)}else Xt="";re.help_append=Xt,re.attributes="";var Kt=oe||""!=Xt?this.mask_parse(S,re):"";X.help=Kt,ie.help=Kt,""!=X.attributes&&(X.attributes=" "+X.attributes.trim()),""!=ie.attributes&&(ie.attributes=" "+ie.attributes.trim());var Qt=this.mask_parse(w,ie);if(""!=Qt&&!b){var ea=this.get_field_value_fallback(e.type,h,"mask_field_label_wrapper",!1,!1,f);if(!1!==ea){var ta={label:Qt};Qt=this.mask_parse(ea,ta)}}var aa=-1!==w.indexOf("#field");switch(h){case"inside":case"bottom":X.pre_label="",X.post_label=aa?X.label:Qt;break;case"top":X.pre_label=aa?X.label:Qt,X.post_label="";break;default:X.pre_label="",X.post_label="",ie.pre_label="",ie.post_label=""}if(""!==T||""!==P){var ia=$.extend(!0,{},X);ia.invalid_feedback=X.invalid_feedback,ia.help=X.help,ia.pre_label=X.pre_label,ia.post_label=X.post_label,X.invalid_feedback="",X.help="",X.pre_label="",X.post_label=""}var ra=this.mask_parse(y,X);if(""!==T||""!==P){var sa=this.get_field_value_fallback(e.type,h,"col_small_prepend_factor",!1,!1,f),oa=this.get_field_value_fallback(e.type,h,"col_small_append_factor",!1,!1,f);if(!1!==sa&&!1!==oa){var _a=""!==T?Math.round(G*sa,0):0;ia.col_small_prepend=_a;var la=""!==P?Math.round(G*oa,0):0;ia.col_small_append=la,ia.col_small_field=G-(_a+la)}ia.field=ra;var na=this.get_field_value_fallback(e.type,h,"mask_field_input_group_field","#field",!1,f);if(""!==na&&(ra=this.mask_parse(na,ia)),""!==T){ia.prepend=T;var ca=this.get_field_value_fallback(e.type,h,"mask_field_input_group_prepend","#prepend",!1,f);if(""!==ca)ra=this.mask_parse(ca,ia)+ra}if(""!==P){ia.append=P;var da=this.get_field_value_fallback(e.type,h,"mask_field_input_group_append","#append",!1,f);if(""!==da)ra+=this.mask_parse(da,ia)}var pa=this.get_field_value_fallback(e.type,h,"mask_field_input_group","#field",!1,f),ua=[];""!==T&&ua.push("wsf-input-group-has-prepend"),""!==P&&ua.push("wsf-input-group-has-append");var fa=ua.join(" ");fa&&(fa=" "+fa),ia.css_input_group=fa,ia.field=ra,ra=this.mask_parse(pa,ia)}if(aa&&(ie.field=ra,Qt=this.mask_parse(w,ie),ra="",ie.field=""),-1!==y.indexOf("#label")&&(X.label=Qt,ra=this.mask_parse(y,X),Qt="",X.label=""),""!=ra&&!b){var ha=this.get_field_value_fallback(e.type,h,"mask_field_wrapper",!1,!1,f);if(!1!==ha){var ma={field:ra};ra=this.mask_parse(ha,ma)}}switch(h){case"right":ra+=Qt;break;case"left":ra=Qt+ra;break;default:aa&&(ra=Qt)}return X.field=ra,this.mask_parse(g,X)},$.WS_Form.prototype.field_type_meta_keys=function(e,t){void 0===t&&(t=!1);var a=[],i=e.fieldsets;for(var r in i)if(i.hasOwnProperty(r)){var s=i[r];if(void 0!==s.meta_keys)for(var r in s.meta_keys)if(s.meta_keys.hasOwnProperty(r)){var o=s.meta_keys[r];if(t){if(void 0===$.WS_Form.meta_keys[o])continue;var _=$.WS_Form.meta_keys[o];void 0!==_[t]&&_[t]&&a.push(o)}else a.push(o)}if(void 0!==s.fieldsets){var l=this.field_type_meta_keys(s,t);l.length>0&&(a=a.concat(l))}}return a},$.WS_Form.prototype.attribute_modify=function(e,t,a,i){var r=!1,s="";return $("<div "+e+" />").each(function(){$.each(this.attributes,function(){if(this.specified){var e=this.name,o=this.value;e==t&&(i?o+=" "+a:o=a,o.trim(),r=!0),s+=" "+e,""!==o&&(s+='="'+o+'"')}})}),r||(s+=" "+t,""!==a&&(s+='="'+a+'"')),s},$.WS_Form.prototype.get_attributes=function(e,t,a,i){"object"!=typeof a&&(a=!1);var r=[],s=[];if(!1!==t)for(var o in t)if(t.hasOwnProperty(o)){var _=t[o];if(void 0!==$.WS_Form.meta_keys[_]){var l=$.WS_Form.meta_keys[_];if(this.is_admin)var n=void 0!==l.mask?l.mask:"",c=void 0!==l.mask_disregard_on_empty&&l.mask_disregard_on_empty,d=void 0!==l.mask_disregard_on_zero&&l.mask_disregard_on_zero,p=void 0!==l.default?l.default:"";else n=void 0!==l.m?l.m:"",c=void 0!==l.e&&l.e,d=void 0!==l.z&&l.z,p=void 0!==l.d?l.d:"";if(!1!==a)if(void 0!==a[_])var u=a[_].trim();else u="";else{if(this.is_admin)var f=void 0!==l.key?l.key:_;else f=void 0!==l.k?l.k:_;var h=void 0!==l.c&&l.c;if(!1!==h){u=this.get_object_meta_value(e,f,p,!1,!1);u=this.parse_variables_process(u,i,!1,e,h).output}else u=this.get_object_meta_value(e,f,p,!1,!0);s[f]=u}u=this.html_encode(u);var m=this.mask_parse(n,{value:u});(c&&""!=u||!c)&&(d&&0!=parseInt(u,10)||!d)&&(r.push(m),delete t[o])}}return t=$.grep(t,function(e){return 0==e||e}),{attributes:r.join(" "),mask_attributes:t,attribute_values:s}},$.WS_Form.prototype.get_tel=function(e){return e.replace(/[^+\d]+/g,"")},$.WS_Form.prototype.get_number=function(e,t,a,i){if(void 0===t&&(t=0),void 0===a&&(a=!0),void 0===i&&(i=!1),"number"==typeof e&&(e=e.toString()),"string"!=typeof e)return 0;(e=e.trim()).includes(ws_form_settings.currency_symbol)&&(a=!0);var r=$.WS_Form.settings_plugin.price_decimal_separator;if(a){var s=$.WS_Form.settings_plugin.price_thousand_separator;e.includes("&")&&(e=this.parse_html_entities(e));var o=new RegExp("[^0-9-"+r+"]","g");if(e=e.replace(o,""),r===s){if(e.substr(-3,1)===r){var _=e.length-3;e=e.substr(0,_)+"[dec]"+e.substr(_+1)}e=(e=e.replace(s,"")).replace("[dec]",".")}else e=e.replace(r,".")}else e=e.replace(r,".");var l=""===e.trim()?t:isNaN(e)?t:parseFloat(e);return!1!==i&&(l=this.get_number_rounded(parseFloat(l),i)),l},$.WS_Form.prototype.parse_html_entities=function(e){return e.replace(/&#([0-9]{1,3});/gi,function(e,t){var a=parseInt(t,10);return String.fromCharCode(a)})},$.WS_Form.prototype.get_number_rounded=function(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)},$.WS_Form.prototype.get_number_to_step=function(e,t){if(isNaN(t))return e;t||(t=1);var a=1/t;return Math.round(e*a)/a},$.WS_Form.prototype.get_float=function(e,t){return void 0===t&&(t=0),"number"==typeof e&&(e=e.toString()),"string"!=typeof e?0:(e=e.trim(),parseFloat(e))},$.WS_Form.prototype.get_currency=function(){var e={},t=parseInt($.WS_Form.settings_plugin.price_decimals,10);switch(e.prefix=ws_form_settings.currency_symbol,e.suffix="",$.WS_Form.settings_plugin.currency_position){case"right":e.prefix="",e.suffix=ws_form_settings.currency_symbol;break;case"left_space":e.prefix=ws_form_settings.currency_symbol+" ";break;case"right_space":e.prefix="",e.suffix=" "+ws_form_settings.currency_symbol}return e.decimals=t<0?0:t,e.decimal_separator=$.WS_Form.settings_plugin.price_decimal_separator,e.thousand_separator=$.WS_Form.settings_plugin.price_thousand_separator,e},$.WS_Form.prototype.get_price=function(e,t,a){return void 0===t&&(t=this.get_currency()),void 0===a&&(a=!0),"number"!=typeof e&&(e=parseFloat(e)),(a?t.prefix:"")+this.replace_all(this.replace_all(e.toFixed(t.decimals).replace(/\B(?=(\d{3})+(?!\d))/g,"[thousand]"),".",t.decimal_separator),"[thousand]",t.thousand_separator)+(a?t.suffix:"")},$.WS_Form.prototype.input_insert_text=function(e,t){switch(e.attr("data-meta-key-type")){case"text_editor":tinymce.activeEditor.execCommand("mceInsertContent",!1,t);break;case"html_editor":var a=$(".CodeMirror")[0].CodeMirror,i=a.getDoc(),r=i.getCursor();i.replaceRange(t,r);var s=a.getValue(),o=a.getTextArea();$(o).val(s).trigger("keyup");break;default:var _=e[0].selectionStart,l=e[0].selectionEnd,n=e.val();e.val(n.substring(0,_)+t+n.substring(l)),e.focus();var c=_+t.length;null!==e.prop("selectionStart")&&e.prop("selectionStart",c),null!==e.prop("selectionEnd")&&e.prop("selectionEnd",c)}},$.WS_Form.prototype.input_insert_function=function(e,t,a,i){void 0===a&&(a=!1);var r=e.val(),s=""==r,o=e.attr("data-meta-key-type");if(!a||s){if(-1===(g=t.indexOf("(")))_=0,i=!1;else{y=t.substring(g);var _=(b=g+this.get_bracket_finish_index(y))-g-1}switch(o){case"text_editor":if(tinymce.activeEditor.execCommand("mceInsertContent",!1,t),s){var l=tinymce.activeEditor.selection.getNode();tinymce.activeEditor.selection.setCursorLocation(l.firstChild,t.length-1)}break;case"html_editor":var n=$(".CodeMirror")[0].CodeMirror,c=n.getDoc(),d=c.getCursor();c.replaceRange(t,d);var p=n.getValue(),u=n.getTextArea();$(u).val(p).trigger("keyup"),(d=c.getCursor()).ch--,n.focus(),c.setCursor(d);break;default:var f=e[0].selectionStart,h=e[0].selectionEnd,m=e.val();e.val(m.substring(0,f)+t+m.substring(h)),e.focus();k=f+t.length-(i?1:0);null!==e.prop("selectionStart")&&e.prop("selectionStart",k-(i?_:0)),null!==e.prop("selectionEnd")&&e.prop("selectionEnd",k)}}else{var v=r.indexOf(t.slice(0,-1));if(-1!==v){var b,g=v+t.length-2,y=r.substring(g);if(-1!==(b=this.get_bracket_finish_index(y))){var k=g+b;switch(o){case"text_editor":case"html_editor":break;default:e.focus(),null!==e.prop("selectionStart")&&e.prop("selectionStart",k),null!==e.prop("selectionEnd")&&e.prop("selectionEnd",k)}}}}},$.WS_Form.prototype.input_delete=function(e){switch(e.attr("data-meta-key-type")){case"text_editor":var t=tinymce.activeEditor.selection.getRng();if(0==t.endOffset)break;var a=t.commonAncestorContainer,i=document.createRange();i.selectNodeContents(a),i.setStart(a,t.endOffset-1),i.setEnd(a,t.endOffset),i.deleteContents(),tinymce.activeEditor.focus();break;case"html_editor":var r=$(".CodeMirror")[0].CodeMirror,s=r.getDoc(),o=$.extend(!0,{},s.getCursor()),_=$.extend(!0,{},s.getCursor());o.ch=o.ch-1,_.ch=_.ch,s.replaceRange("",o,_),r.focus(),s.setCursor(o);break;default:var l=e[0].selectionStart,n=e.val();e.val(n.substring(0,l-1)+n.substring(l-0)),e.focus();var c=l-1;null!==e.prop("selectionStart")&&e.prop("selectionStart",c),null!==e.prop("selectionEnd")&&e.prop("selectionEnd",c)}},$.WS_Form.prototype.input_clear=function(e){switch(e.attr("data-meta-key-type")){case"text_editor":tinymce.activeEditor.setContent(""),tinymce.activeEditor.focus();break;case"html_editor":var t=$(".CodeMirror")[0].CodeMirror;t.setValue(""),t.focus();t.getValue();var a=t.getTextArea();$(a).val("").trigger("keyup");break;default:e.val(""),e.focus()}},$.WS_Form.prototype.menu_highlight=function(e){void 0===e&&(e="ws-form"),$("#toplevel_page_"+e).removeClass("wp-not-current-submenu").addClass("wp-has-current-submenu current").addClass("selected"),$('[href="admin.php?page='+e+'"]',$("#toplevel_page_"+e)).closest("li").addClass("wp-menu-open current")},$.WS_Form.prototype.get_plugin_website_url=function(e,t){return void 0===e&&(e=""),"https://wsform.com"+e+"?utm_source=ws_form"+(void 0===t?"":"&utm_medium="+t)},$.WS_Form.prototype.form_add_hidden_input=function(e,t,a,i,r){var s=$('input[name="'+e+'"]',this.form_canvas_obj);s.length&&-1===e.indexOf("[]")?s.val(t):(void 0===t&&(t=""),void 0===a&&(a=!1),void 0===i&&(i=!1),void 0===r&&(r=!1),this.form_canvas_obj.append('<input type="hidden" name="'+e+'" value='+(r?"'":'"')+t+(r?"'":'"')+(!1!==a?' id="'+a+'"':"")+(!1!==i?" "+i:"")+" />"))},$.WS_Form.prototype.mod_security_fix=function(e){var t=this.replace_all(e,"#","~WSF%23~");return t=this.replace_all(t,"<","~WSF%60~"),t=this.replace_all(t,">","~WSF%62~"),t=this.replace_all(t,"SELECT","~WSFTCELES~"),t=this.replace_all(t,"select","~WSFtceles~"),t=this.replace_all(t,"Select","~WSFtceleS~"),t=this.replace_all(t,"style","~WSFelyts~"),t=this.replace_all(t,"STYLE","~WSFELYTS~"),t=this.replace_all(t,"src","~WSFcrs~"),t=this.replace_all(t,"SRC","~WSFCRS~"),t=this.replace_all(t,"xmlns","~WSFsnlmx~"),t=this.replace_all(t,"XMLNS","~WSFSNLMX~"),t=this.replace_all(t,"object_id","~WSFid_tcejbo~")},$.WS_Form.prototype.wpautop=function(e,t){void 0===t&&(t=!0);var a=new Map;if(""===e.trim())return"";if((e+="\n").indexOf("<pre")>-1){var i=e.split("</pre>"),r=i.pop();e="",i.forEach(function(t,i){var r=t.indexOf("<pre");if(-1!==r){var s="<pre wp-pre-tag-"+i+"></pre>";a[s]=t.substr(r)+"</pre>",e+=t.substr(0,r)+s}else e+=t}),e+=r}var s="(?:table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary)";(e=(e=(e=(e=e.replace(/<br \/>\s*<br \/>/,"\n\n")).replace(new RegExp("(<"+s+"[^>]*>)","gmi"),"\n$1")).replace(new RegExp("(</"+s+">)","gmi"),"$1\n\n")).replace(/\r\n|\r/,"\n")).indexOf("<option")>-1&&(e=(e=e.replace(/\s*<option'/gim,"<option")).replace(/<\/option>\s*/gim,"</option>")),e.indexOf("</object>")>-1&&(e=(e=(e=e.replace(/(<object[^>]*>)\s*/gim,"$1")).replace(/\s*<\/object>/gim,"</object>")).replace(/\s*(<\/?(?:param|embed)[^>]*>)\s*/gim,"$1")),(e.indexOf("<source")>-1||e.indexOf("<track")>-1)&&(e=(e=(e=e.replace(/([<\[](?:audio|video)[^>\]]*[>\]])\s*/gim,"$1")).replace(/\s*([<\[]\/(?:audio|video)[>\]])/gim,"$1")).replace(/\s*(<(?:source|track)[^>]*>)\s*/gim,"$1"));var o=(e=e.replace(/\n\n+/gim,"\n\n")).split(/\n\s*\n/);return e="",o.forEach(function(t){e+="<p>"+t.replace(/^\s+|\s+$/g,"")+"</p>\n"}),e=(e=(e=(e=(e=(e=(e=(e=e.replace(/<p>\s*<\/p>/gim,"")).replace(/<p>([^<]+)<\/(div|address|form)>/gim,"<p>$1</p></$2>")).replace(new RegExp("<p>s*(</?"+s+"[^>]*>)s*</p>","gmi"),"$1",e)).replace(/<p>(<li.+?)<\/p>/gim,"$1")).replace(/<p><blockquote([^>]*)>/gim,"<blockquote$1><p>")).replace(/<\/blockquote><\/p>/gim,"</p></blockquote>")).replace(new RegExp("<p>s*(</?"+s+"[^>]*>)","gmi"),"$1")).replace(new RegExp("(</?"+s+"[^>]*>)s*</p>","gmi"),"$1"),t&&(e=(e=(e=e.replace(/<(script|style)(?:.|\n)*?<\/\\1>/gim,function(e){return e[0].replace("\n","<WPPreserveNewline />")})).replace(/(<br \/>)?\s*\n/gim,"<br />\n")).replace("<WPPreserveNewline />","\n")),e=(e=(e=e.replace(new RegExp("(</?"+s+"[^>]*>)s*<br />","gmi"),"$1")).replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)[^>]*>)/gim,"$1")).replace(/\n<\/p>$/gim,"</p>"),Object.keys(a).length&&(e=e.replace(new RegExp(Object.keys(a).join("|"),"gi"),function(e){return a[e]})),e},$.WS_Form.prototype.get_part_id=function(e,t,a){void 0===t&&(t=!1),void 0===a&&(a="field");var i=!1!==t?"-repeat-"+t:"";return this.form_id_prefix+a+"-"+e+i},$.WS_Form.prototype.get_field_name=function(e,t,a){void 0===t&&(t=!1),void 0===a&&(a=!1);return this.field_name_prefix+e+(!1!==t?a?"_"+t:"["+t+"]":"")},$.WS_Form.prototype.get_section_repeat_min=function(e){var t=this.get_object_meta_value(e,"section_repeat_min",1);return(t=""==t||isNaN(t)?1:parseInt(t,10))<1&&(t=1),t},$.WS_Form.prototype.get_section_repeat_max=function(e,t){void 0===t&&(t=this.get_section_repeat_min(e));var a=this.get_object_meta_value(e,"section_repeat_max",!1);return!1!==(a=""!=a&&!isNaN(t)&&parseInt(a,10))&&a<t&&(t=a),a},$.WS_Form.prototype.get_section_repeat_default=function(e,t,a){void 0===t&&(t=this.get_section_repeat_min(e)),void 0===a&&(a=this.get_section_repeat_max(e,t));var i=this.get_object_meta_value(e,"section_repeat_default",1);return(i=""==i||isNaN(i)?1:parseInt(i,10))<t&&(i=t),!1!==a&&i>a&&(i=a),i},$.WS_Form.prototype.drag_is_file=function(e){return void 0===e.originalEvent||void 0===e.originalEvent.dataTransfer||void 0===e.originalEvent.dataTransfer.types||e.originalEvent.dataTransfer.types.includes("Files")},$.WS_Form.prototype.tooltip=function(e,t){return void 0===t&&(t="bottom-center"),$.WS_Form.settings_plugin.helper_icon_tooltip?' data-wsf-tooltip="'+t+'" title="'+this.html_encode(e)+'"':' title="'+this.html_encode(e)+'"'},$.WS_Form.prototype.tooltips=function(){$("#wpbody").on("mouseenter","[data-wsf-tooltip]",function(){$(this).attr("data-wsf-tooltip-title",$(this).attr("title")).removeAttr("title")}),$("#wpbody").on("mouseleave","[data-wsf-tooltip-title]",function(){$(this).attr("title",$(this).attr("data-wsf-tooltip-title")).removeAttr("data-wsf-tooltip-title")})},$.WS_Form.prototype.input_auto_size=function(e,t){var a=this;this.input_auto_size_process(e,t),e.on("change input paste",function(){a.input_auto_size_process($(this),t)})},$.WS_Form.prototype.input_auto_size_process=function(e,t){var a=e.val(),i=$("<span"+(void 0!==t?' class="'+t+'"':"")+">"+a+"</span>");i.hide().appendTo(document.body);var r=i.width();i.remove(),e.width(r)},$.WS_Form.prototype.get_date=function(e,t,a){switch(t||(t="date"),a||(a=ws_form_settings.date_format),t){case"time":return e="01/01/1970 "+e,new Date(e);case"week":case"month":return!1}var i=!1;switch(a){case"d/m/Y":i="/";break;case"d.m.Y":i=".";break;case"d-m-Y":i="-"}if(!1!==i){switch(t){case"datetime-local":var r=e.indexOf(" "),s=e.substring(0,r),o=e.substring(r);break;default:s=e,o=""}var _=s.split(i);if(3===_.length){var l=parseInt(_[0],10);s=parseInt(_[1],10)+"/"+l+"/"+parseInt(_[2],10)}e=s+o}return e=e.replace(/(\d+)(st|nd|rd|th)/g,"$1"),new Date(e)},$.WS_Form.prototype.debug_timer_start=function(){this.debug_timer=performance.now()},$.WS_Form.prototype.debug_timer_console=function(e){console.log(e+": "+(performance.now()-this.debug_timer)+" ms")},$.WS_Form.prototype.score=function(e,t,a){if(e===t)return 1;if(""===t)return 0;var i,r,s,o,_,l=0,n=e,c=n.toLowerCase(),d=n.length,p=t.toLowerCase(),u=t.length,f=0,h=1;if(a&&(o=1-a),a)for(_=0;_<u;_+=1)-1===(s=c.indexOf(p[_],f))?h+=o:(f===s?i=.7:(i=.1," "===n[s-1]&&(i+=.8)),n[s]===t[_]&&(i+=.1),l+=i,f=s+1);else for(_=0;_<u;_+=1){if(-1===(s=c.indexOf(p[_],f)))return 0;f===s?i=.7:(i=.1," "===n[s-1]&&(i+=.8)),n[s]===t[_]&&(i+=.1),l+=i,f=s+1}return r=.5*(l/d+l/u)/h,p[0]===c[0]&&r<.85&&(r+=.15),r},$.WS_Form.prototype.replace_all=function(e,t,a){return void 0===a?e.toString():e.split(t).join(a)},$.WS_Form.prototype.get_file_size=function(e){return e>=1048576?e=Math.round(e/1048576,2)+" MB":e>=1024?e=Math.round(e/1024,2)+" KB":e>1?e+=" bytes":1==e?e+=" byte":e="0 bytes",e},$.WS_Form.prototype.get_date_by_type=function(e,t){if(!e)return"";var a=this.get_object_meta_value(t,"format_date",ws_form_settings.date_format);a||(a=ws_form_settings.date_format);var i=this.get_object_meta_value(t,"format_time",ws_form_settings.time_format);i||(i=ws_form_settings.time_format);var r=this.get_object_meta_value(t,"input_type_datetime","date");switch(r){case"datetime-local":case"date":switch(a){case"d/m/Y":var s=-1!==e.indexOf(" ")?[e.substring(0,e.indexOf(" ")),e.substring(e.indexOf(" ")+1)]:[e];e=(o=s[0].split("/"))[1]+"/"+o[0]+"/"+o[2]+(void 0!==s[1]?" "+s[1]:"");break;case"d-m-Y":s=-1!==e.indexOf(" ")?[e.substring(0,e.indexOf(" ")),e.substring(e.indexOf(" ")+1)]:[e];e=(o=s.split("-"))[1]+"/"+o[0]+"/"+o[2]+(void 0!==s[1]?" "+s[1]:"");break;case"d.m.Y":var o;s=-1!==e.indexOf(" ")?[e.substring(0,e.indexOf(" ")),e.substring(e.indexOf(" ")+1)]:[e];e=(o=s[0].split("."))[1]+"/"+o[0]+"/"+o[2]+(void 0!==s[1]?" "+s[1]:"")}}switch("time"!==r&&4===e.indexOf("-")&&-1===e.indexOf(":")&&(e+=" 00:00:00"),r){case"date":return e=new Date(e),this.date_format(e,a);case"month":return e=new Date(e),this.date_format(e,"F Y");case"time":return e=new Date("1970-01-01 "+e),this.date_format(e,i);case"week":return e=new Date(e),this.language("week")+" "+this.date_format(e,"W, Y");default:return e=new Date(e),this.date_format(e,a+" "+i)}},$.WS_Form.prototype.date_format=function(e,t){var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o={d:function(){var e=this.getDate();return(e<10?"0":"")+e},D:function(){return r[this.getDay()]},j:function(){return this.getDate()},l:function(){return s[this.getDay()]},N:function(){var e=this.getDay();return 0===e?7:e},S:function(){var e=this.getDate();return e%10==1&&11!==e?"st":e%10==2&&12!==e?"nd":e%10==3&&13!==e?"rd":"th"},w:function(){return this.getDay()},z:function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil((this-e)/864e5)},W:function(){var e=new Date(this.valueOf()),t=(this.getDay()+6)%7;e.setDate(e.getDate()-t+3);var a=e.valueOf();e.setMonth(0,1),4!==e.getDay()&&e.setMonth(0,1+(4-e.getDay()+7)%7);var i=1+Math.ceil((a-e)/6048e5);return i<10?"0"+i:i},F:function(){return i[this.getMonth()]},m:function(){var e=this.getMonth();return(e<9?"0":"")+(e+1)},M:function(){return a[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){var e=this.getFullYear(),t=this.getMonth()+1;return 12===t&&(e=e++,t=0),new Date(e,t,0).getDate()},L:function(){var e=this.getFullYear();return e%400==0||e%100!=0&&e%4==0},o:function(){var e=new Date(this.valueOf());return e.setDate(e.getDate()-(this.getDay()+6)%7+3),e.getFullYear()},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){return this.getHours()<12?"am":"pm"},A:function(){return this.getHours()<12?"AM":"PM"},B:function(){return Math.floor(1e3*((this.getUTCHours()+1)%24+this.getUTCMinutes()/60+this.getUTCSeconds()/3600)/24)},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){var e=this.getHours();return((e%12||12)<10?"0":"")+(e%12||12)},H:function(){var e=this.getHours();return(e<10?"0":"")+e},i:function(){var e=this.getMinutes();return(e<10?"0":"")+e},s:function(){var e=this.getSeconds();return(e<10?"0":"")+e},v:function(){var e=this.getMilliseconds();return(e<10?"00":e<100?"0":"")+e},e:function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},I:function(){for(var e=null,t=0;t<12;++t){var a=new Date(this.getFullYear(),t,1).getTimezoneOffset();if(null===e)e=a;else{if(a<e){e=a;break}if(a>e)break}}return this.getTimezoneOffset()===e|0},O:function(){var e=this.getTimezoneOffset();return(-e<0?"-":"+")+(Math.abs(e/60)<10?"0":"")+Math.floor(Math.abs(e/60))+(0===Math.abs(e%60)?"00":(Math.abs(e%60)<10?"0":"")+Math.abs(e%60))},P:function(){var e=this.getTimezoneOffset();return(-e<0?"-":"+")+(Math.abs(e/60)<10?"0":"")+Math.floor(Math.abs(e/60))+":"+(0===Math.abs(e%60)?"00":(Math.abs(e%60)<10?"0":"")+Math.abs(e%60))},T:function(){var e=this.toLocaleTimeString(navigator.language,{timeZoneName:"short"}).split(" ");return e[e.length-1]},Z:function(){return 60*-this.getTimezoneOffset()},c:function(){return this.format("Y-m-d\\TH:i:sP")},r:function(){return this.toString()},U:function(){return Math.floor(this.getTime()/1e3)}};return t.replace(/(\\?)(.)/g,function(t,a,i){return""===a&&o[i]?o[i].call(e):i})}}(jQuery);